webpackJsonp([1],{"2Xa+":function(t,e){},"7Q5p":function(t,e){t.exports={title:"操作+填空(非引导)",version:"2.3.7",id:"cjvpzgoj00018q06863vagp8b",stages:[]}},"E/U7":function(t,e){t.exports={port:8080}},IcnI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),n=a("2bvH"),s=a("004W");a.n(s);i.default.use(n.a);const o={postAnswer({state:t}){console.log(t.postArr,"整体答题数据"),Object(s.postAnswer)(t.postArr,t.testNum)},defaultPushToPostArr({state:t},e){t.postArr.push(e)},increment({state:t}){t.pageNumber++,console.log(t)},decrement({state:t}){t.pageNumber--},setPageNumber({state:t},e){t.pageNumber=e},pushToPostArr({state:t},e){console.log(e,"第"+e.id+"道题答题数据"),t.postArr.splice(e.id,1,e)}},r={setIsPost(t,e){t.isShow=e},setpIsPost(t,e){t.pisShow=e}};window.store=new n.a.Store({state:{postArr:[],resultArr:[],pisShow:!1,pShow:!1,goldnum:0,testNum:1,result:[],isShow:!1,pageNumber:0,question:null,dragShow:!0},actions:o,mutations:r})},"K/KG":function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("xd7I"),n=a("9bLE"),s=a("TRsl"),o=a("QBX4");a("IcnI");var r={name:"App",data:()=>({}),components:{End:s.a,Pend:o.a},computed:{isShow:(t,e)=>store.state.isShow,pisShow:(t,e)=>store.state.pisShow},mounted(){console.log("APP组件加载完成")}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),t._v(" "),t.isShow?a("End"):t._e(),t._v(" "),t.pisShow?a("Pend"):t._e(),t._v(" "),t.$store.state.isShow?a("div",{staticClass:"text"}):t._e()],1)},staticRenderFns:[]};var m=a("C7Lr")(r,l,!1,function(t){a("pTbB")},null,null).exports,c=a("3XdE"),d=a("HQUh"),g=a("zwgh"),h=(a("IcnI"),a("uTb0")),p=a.n(h),u=a("UH4H"),v=a("004W"),b=a("xtmC"),f=a.n(b);class x{constructor(){this.pixiStage=null,this.keycurrentTarget=null,this.keyComplete=!0,this.temContainer=new n.Container,this.temContainer.name="temContainer",this.dragArr=null,this.drawArr=null,this.currentTarget=null,this.drawBlankArr=null,this.pen=null,this.backBtn=null,this.resBtn=null,this.lineArea={x:null,y:null,width:null,height:null},this.lineWidthNum=null,this.lineColor=null,this.drawDownX=null,this.drawDownY=null,this.lineMc=null,this.isStraight=null,this.draw=!1,this.dragBlankArr=null,this.dragOptionArr=null,this.trash=null,this.currentDragTarget=null,this.dragHitArea={x:null,y:null,width:null,height:null},this.hitArea=new PIXI.Sprite.fromImage(res.image_kk.url),this.startPos=new n.Point(0,0),this.offsetPos=new n.Point(0,0),this.startCos=null,this.complete=!0,this.fontFamily=null,this.fontSize=null,this.strLength=null,this.fontColor=null,this.fontWeight=null,this.fontStyle=null,this.keySpriteArr=[],this.keyArr=[{name:"image_num1",x:60,y:70,width:86,height:87,keyValue:"1"},{name:"image_num2",x:155,y:70,width:86,height:87,keyValue:"2"},{name:"image_num3",x:250,y:70,width:86,height:87,keyValue:"3"},{name:"image_num4",x:345,y:70,width:86,height:87,keyValue:"4"},{name:"image_num5",x:440,y:70,width:86,height:87,keyValue:"5"},{name:"image_add",x:535,y:70,width:86,height:87,keyValue:"+"},{name:"image_jian",x:630,y:70,width:86,height:87,keyValue:"-"},{name:"image_deng",x:725,y:70,width:86,height:87,keyValue:"="},{name:"image_point",x:820,y:70,width:86,height:87,keyValue:"."},{name:"image_tui",x:915,y:70,width:86,height:87,keyValue:"tui"},{name:"image_num6",x:60,y:174,width:86,height:87,keyValue:"6"},{name:"image_num7",x:155,y:174,width:86,height:87,keyValue:"7"},{name:"image_num8",x:250,y:174,width:86,height:87,keyValue:"8"},{name:"image_num9",x:345,y:174,width:86,height:87,keyValue:"9"},{name:"image_num0",x:440,y:174,width:86,height:87,keyValue:"0"},{name:"image_cheng",x:535,y:174,width:86,height:87,keyValue:"×"},{name:"image_chu",x:630,y:174,width:86,height:87,keyValue:"÷"},{name:"image_left",x:725,y:174,width:86,height:87,keyValue:"("},{name:"image_right",x:820,y:174,width:86,height:87,keyValue:")"},{name:"image_del",x:915,y:174,width:86,height:87,keyValue:"del"}],this.keyShow=!0,this.keyMap=null,this.keyBg=null,this.key_btn=null,this.prevBtn=null,this.nextBtn=null,this.submit=null}exec(){console.log("= 开始执行逻辑 ="),this.initGame(store.state.pageNumber),stage.getChildByName("GAME").children.map((t,e)=>{t.getChildByName("componentContainer").lineArr=[]}),this.initKeyMap(),"2"==question.dragShow?(stage.on("pointermove",this.stageMove.bind(this)),stage.on("pointerup",this.stageUp.bind(this))):(stage.on("pointermove",this.moveTarget.bind(this)),stage.on("pointerup",this.leaveTarget.bind(this))),stage.on("pointerup",this.leaveKeyTarget.bind(this))}btn(){let t=this;question.commentBtn.prevBtn.show?0==store.state.pageNumber?(this.prevBtn.visible=!1,this.prevBtn.interactive=!1):store.state.pageNumber!=question.sources.length-1?(this.prevBtn.visible=!0,this.submit.interactive=!1,this.nextBtn.interactive=!0):(this.prevBtn.visible=!0,this.prevBtn.interactive=!0,this.nextBtn.interactive=!1,this.submit.interactive=!0):(this.prevBtn.interactive=!1,this.prevBtn.visible=!1),store.state.pageNumber==question.sources.length-1?(this.nextBtn.visible=!1,this.submit.visible=!0,this.nextBtn.interactive=!1):(this.nextBtn.visible=!0,this.submit.visible=!1,this.submit.interactive=!1),this.prevBtn.on("pointerdown",function(){let e=new v.AnswerInfo,a=[],i=[],n=0,s=1;t.dragBlankArr.length>0?(t.dragBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e)):t.drawBlankArr.length>0&&(t.drawBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e),t.pixiStage.removeChild(t.backBtn)),t.keyMap.removeChildren(),t.temContainer.removeChildren(),t.pixiStage.removeChild(t.temContainer),t.stemAudioPause(store.state.pageNumber),t.pen&&(t.pen.visible=!1),question.comentAudio.keyBlank.show&&question.comentAudio.keyBlank.audio&&res[question.comentAudio.keyBlank.audio].sound.pause(),store.state.pageNumber--,0==store.state.pageNumber&&(t.prevBtn.visible=!1,t.prevBtn.interactive=!1,t.nextBtn.visible=!0,t.nextBtn.interactive=!0,t.submit.visible=!1,t.submit.interactive=!1),t.initGame(store.state.pageNumber)}),this.nextBtn.on("pointerdown",function(){let e=new v.AnswerInfo,a=[],i=[],n=0,s=1;t.dragBlankArr.length>0?(t.dragBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e)):t.drawBlankArr.length>0&&(t.drawBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e),t.pixiStage.removeChild(t.backBtn)),t.keyMap.removeChildren(),t.temContainer.removeChildren(),t.pixiStage.removeChild(t.temContainer),t.pen&&(t.pen.visible=!1),t.stemAudioPause(store.state.pageNumber),question.comentAudio.keyBlank.show&&question.comentAudio.keyBlank.audio&&res[question.comentAudio.keyBlank.audio].sound.pause(),store.state.pageNumber++,store.state.pageNumber==question.sources.length-1?(t.nextBtn.visible=!1,t.nextBtn.interactive=!1,t.submit.visible=!0,t.submit.interactive=!0,question.commentBtn.prevBtn.show?(t.prevBtn.visible=!0,t.prevBtn.interactive=!0):(t.prevBtn.visible=!1,t.prevBtn.interactive=!1)):(t.nextBtn.visible=!0,t.nextBtn.interactive=!0,t.submit.visible=!1,t.submit.interactive=!1,question.commentBtn.prevBtn.show?(t.prevBtn.visible=!0,t.prevBtn.interactive=!0):(t.prevBtn.visible=!1,t.prevBtn.interactive=!1)),t.initGame(store.state.pageNumber)}),this.submit.on("pointerdown",function(){console.log("提交答案");let e=new v.AnswerInfo,a=[],i=[],n=0,s=1;t.dragBlankArr.length>0?(t.dragBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e),store.dispatch("postAnswer")):t.drawBlankArr.length>0&&(t.drawBlankArr.map((t,e)=>{t.isClick=!1,t.texture=t.default,i.push(t.children[0].text),a[e]=t.keys[0].value,t.keys.map((i,o)=>{String(t.children[0].text)==String(i.value)&&(a[e]=t.children[0].text,n++,s--)})}),t.stemAudioPause(store.state.pageNumber),question.comentAudio.keyBlank.show&&question.comentAudio.keyBlank.audio&&res[question.comentAudio.keyBlank.audio].sound.pause(),e.init({type:2,useranswer:i,times:[],answer:a,id:store.state.pageNumber,rightnum:n,wrongnum:s}),store.dispatch("pushToPostArr",e),store.dispatch("postAnswer"))}),this.submit.on("pointerup",function(e){u.TweenLite.to(t.submit,.2,{width:t.submit.startWidth,height:t.submit.startHeight})})}initGame(t){let e=this;console.log("第"+t+"页"),this.pixiStage=stage.getChildByName("GAME").getChildByName("GAME"+t).getChildByName("componentContainer"),Object(d.RenderPageByIndex)(t),this.keyMap=null,this.keyBg=null,this.key_btn=null,this.prevBtn=null,this.nextBtn=null,this.submit=null,this.keySpriteArr=[],this.resBtn=null,this.backBtn=null,e.pixiStage.children.map((t,a)=>{null!=t.name&&-1!=t.name.indexOf("back")&&e.pixiStage.removeChild(t)}),"2"==question.dragShow&&(question.sources[t].content.option2.back.image.name&&(e.backBtn=new PIXI.Sprite.fromImage(res[question.sources[t].content.option2.back.image.name].url),e.backBtn.anchor.set(.5,.5),e.backBtn.x=parseInt(question.sources[t].content.option2.back.image.x)+parseInt(question.sources[t].content.option2.back.image.width)/2,e.backBtn.y=parseInt(question.sources[t].content.option2.back.image.y)+parseInt(question.sources[t].content.option2.back.image.height)/2,e.backBtn.interactive=!0,e.backBtn.startWidth=question.sources[t].content.option2.back.image.width,e.backBtn.startHeight=question.sources[t].content.option2.back.image.height,e.pixiStage.addChild(e.backBtn)),question.sources[t].content.option2.reset.image.name&&(e.resBtn=new PIXI.Sprite.fromImage(res[question.sources[t].content.option2.reset.image.name].url),e.resBtn.anchor.set(.5,.5),e.resBtn.x=parseInt(question.sources[t].content.option2.reset.image.x)+parseInt(question.sources[t].content.option2.reset.image.width)/2,e.resBtn.y=parseInt(question.sources[t].content.option2.reset.image.y)+parseInt(question.sources[t].content.option2.reset.image.height)/2,e.resBtn.interactive=!0,e.resBtn.startWidth=question.sources[t].content.option2.reset.image.width,e.resBtn.startHeight=question.sources[t].content.option2.reset.image.height,e.pixiStage.addChild(e.resBtn))),this.keyMap=new n.Container,this.keyBg=new PIXI.Sprite.fromImage(res.image_key_bg.url),this.keyMap.addChild(this.keyBg),this.keyMap.x=510,this.keyMap.y=858,this.key_btn=new PIXI.Sprite.fromImage(res.image_spread.url),this.key_btn.x=984,this.key_btn.y=40,this.keyMap.addChild(this.key_btn),this.keyArr.map((t,e)=>{let a=new PIXI.Sprite.fromImage(res[t.name].url);a.interactive=!0,a.anchor.set(.5,.5),a.x=t.x,a.y=t.y,a.startWidth=t.width,a.startHeight=t.height,a.key=t.keyValue,a.cursor="pointer",this.keySpriteArr.push(a),this.keyMap.addChild(a)}),this.initKeyMap(),this.prevBtn=new PIXI.Sprite.fromImage(res[question.commentBtn.prevBtn.image.name].url),this.prevBtn.anchor.set(.5,.5),this.prevBtn.interactive=!0,this.prevBtn.x=parseFloat(question.commentBtn.prevBtn.image.x)+parseFloat(question.commentBtn.prevBtn.image.width)/2,this.prevBtn.y=parseFloat(question.commentBtn.prevBtn.image.y)+parseFloat(question.commentBtn.prevBtn.image.height)/2,this.prevBtn.width=parseFloat(question.commentBtn.prevBtn.image.width),this.prevBtn.height=parseFloat(question.commentBtn.prevBtn.image.height),this.prevBtn.startWidth=question.commentBtn.prevBtn.image.width,this.prevBtn.startHeight=question.commentBtn.prevBtn.image.height,this.prevBtn.on("pointerover",this.overAndScale.bind(this)),this.prevBtn.on("pointerout",this.outAndScale.bind(this)),this.nextBtn=new PIXI.Sprite.fromImage(res[question.commentBtn.nextBtn.image.name].url),this.nextBtn.anchor.set(.5,.5),this.nextBtn.interactive=!0,this.nextBtn.x=parseFloat(question.commentBtn.nextBtn.image.x)+parseFloat(question.commentBtn.nextBtn.image.width)/2,this.nextBtn.y=parseFloat(question.commentBtn.nextBtn.image.y)+parseFloat(question.commentBtn.nextBtn.image.height)/2,this.nextBtn.width=parseFloat(question.commentBtn.nextBtn.image.width),this.nextBtn.height=parseFloat(question.commentBtn.nextBtn.image.height),this.nextBtn.startWidth=question.commentBtn.nextBtn.image.width,this.nextBtn.startHeight=question.commentBtn.nextBtn.image.height,this.nextBtn.on("pointerover",this.overAndScale.bind(this)),this.nextBtn.on("pointerout",this.outAndScale.bind(this)),this.submit=new PIXI.Sprite.fromImage(res[question.commentBtn.subBtn.image.name].url),this.submit.anchor.set(.5,.5),this.submit.interactive=!0,this.submit.x=parseFloat(question.commentBtn.nextBtn.image.x)+parseFloat(question.commentBtn.nextBtn.image.width)/2,this.submit.y=parseFloat(question.commentBtn.nextBtn.image.y)+parseFloat(question.commentBtn.nextBtn.image.height)/2,this.submit.width=parseFloat(question.commentBtn.nextBtn.image.width),this.submit.height=parseFloat(question.commentBtn.nextBtn.image.height),this.submit.startWidth=question.commentBtn.nextBtn.image.width,this.submit.startHeight=question.commentBtn.nextBtn.image.height,this.submit.on("pointerover",this.overAndScale.bind(this)),this.submit.on("pointerout",this.outAndScale.bind(this)),this.temContainer.addChild(this.prevBtn,this.nextBtn,this.submit),this.temContainer.addChild(this.keyMap),this.pixiStage.addChild(this.temContainer),this.btn(),this.dragArr=[],this.drawArr=[],this.dragBlankArr=[],this.drawBlankArr=[],this.dragOptionArr=[],this.fontFamily=null,this.fontSize=null,this.strLength=null,this.fontColor=null,this.fontWeight=null,this.fontStyle=null,this.trash=null,e.getChoice(),e.getBlankChoice(store.state.pageNumber),"1"==question.dragShow&&e.setOptionArr(store.state.pageNumber),"2"==question.dragShow&&e.setDrawArr(store.state.pageNumber)}initKeyMap(){let t=this;"1"==question.keyChoice?(this.key_btn.visible=!1,t.keyShow=!0):"2"==question.keyChoice&&(t.keyShow=!1,t.keyMap.y=1080,this.key_btn.visible=!0,this.key_btn.interactive=!0,this.key_btn.on("pointerdown",function(){u.TweenLite.to(t.keyMap,.5,{y:1080,onComplete:function(){t.keyShow=!1}})}))}setDrawArr(t){let e=this;question.sources[t].content.option2.brash.image.name&&(this.pen=new PIXI.Sprite.fromImage(res[question.sources[t].content.option2.brash.image.name].url),e.pixiStage.addChild(this.pen),e.pen.interactive=!0,e.pen.buttonMode=!1,e.pen.x=-100,e.pen.y=-100,e.pen.visible&&stage.on("pointerdown",this.penMouseDown.bind(this))),e.lineArea.x=question.sources[t].content.option2.dragArea.x,e.lineArea.y=question.sources[t].content.option2.dragArea.y,e.lineArea.width=question.sources[t].content.option2.dragArea.width,e.lineArea.height=question.sources[t].content.option2.dragArea.height,e.lineWidthNum=question.sources[t].content.option2.brash.degree,e.lineColor=question.sources[t].content.option2.brash.color,e.isStraight=question.sources[t].content.option2.brashChoice.choice,stage.on("pointermove",this.penStageMove.bind(this)),e.resBtn&&(e.resBtn.on("pointerover",this.overAndScale.bind(this)),e.resBtn.on("pointerout",this.outAndScale.bind(this)),e.resBtn.on("pointerdown",this.resetClick.bind(this))),e.backBtn&&(e.backBtn.on("pointerover",this.overAndScale.bind(this)),e.backBtn.on("pointerout",this.outAndScale.bind(this)),e.backBtn.on("pointerdown",this.backClick.bind(this)))}setOptionArr(t){let e=this;question.sources[t].content.option1.option.map((t,a)=>{e.dragOptionArr.map((e,a)=>{t.image.componentName==e.name&&(e.interactive=!0,e.anchor.set(.5,.5),e.x=parseInt(t.image.x)+parseInt(t.image.width/2),e.y=parseInt(t.image.y)+parseInt(t.image.height/2),e.startWidth=parseFloat(t.image.width),e.startHeight=parseFloat(t.image.height),e.startX=parseInt(t.image.x)+parseInt(t.image.width/2),e.startY=parseInt(t.image.y)+parseInt(t.image.height/2),e.name=t.image.name,e.hit=!1,e.isUp=!1,e.upX=null,e.unY=null,e.dragging=!1,e.repeat=!1,e.isTrash=!1)})}),question.sources[t].content.option1.trash.show&&question.sources[t].content.option1.trash.image.name?(this.trash.dicked=PIXI.Texture.fromImage(question.sources[t].content.option1.trash.image.name_another.name),this.trash.default=PIXI.Texture.fromImage(question.sources[t].content.option1.trash.image.name),this.trash.visible=!0):this.trash=null,this.dragHitArea.x=question.sources[t].content.option1.dragArea.x,this.dragHitArea.y=question.sources[t].content.option1.dragArea.y,this.dragHitArea.width=question.sources[t].content.option1.dragArea.width,this.dragHitArea.height=question.sources[t].content.option1.dragArea.height,this.hitArea.x=parseFloat(this.dragHitArea.x),this.hitArea.y=parseFloat(this.dragHitArea.y),this.hitArea.width=parseFloat(this.dragHitArea.width),this.hitArea.height=parseFloat(this.dragHitArea.height),e.pixiStage.addChild(this.hitArea),e.dragOptionArr.map((a,i)=>{a.on("pointerover",this.overAndScale.bind(this)),a.on("pointerout",this.outAndScale.bind(this)),a.on("pointerdown",function(a){e.getCurrentTarget.bind(e)(a,t)})})}resetClick(t){let e=this;for(let t=0;t<e.pixiStage.lineArr.length;t++)e.pixiStage.removeChild(e.pixiStage.lineArr[t]);e.pixiStage.lineArr=[]}backClick(t){console.log("撤销....");this.pixiStage.removeChild(this.pixiStage.lineArr[this.pixiStage.lineArr.length-1]),this.pixiStage.lineArr.pop()}penStageMove(t){let e=this,a=t.data.getLocalPosition(e.pixiStage);e.pen&&e.resBtn&&e.backBtn&&(e.pen.x=t.data.global.x-5,e.pen.y=t.data.global.y-5,e.pixiStage.setChildIndex(e.pen,e.pixiStage.children.length-3),e.pixiStage.setChildIndex(e.resBtn,e.pixiStage.children.length-1),e.pixiStage.setChildIndex(e.backBtn,e.pixiStage.children.length-2),e.pen.x>e.lineArea.x&&e.pen.x<e.lineArea.x+e.lineArea.width&&e.pen.y>e.lineArea.y&&e.pen.y<e.lineArea.y+e.lineArea.height?a.x>e.resBtn.x-e.resBtn.width/2&&a.x<e.resBtn.x+e.resBtn.width/2&&a.y>e.resBtn.y-e.resBtn.height/2&&a.y<e.resBtn.y+e.resBtn.height/2?(stage.cursor="pointer",e.pixiStage.cursor="pointer",e.pen.visible=!1):a.x>e.backBtn.x-e.backBtn.width/2&&a.x<e.backBtn.x+e.backBtn.width/2&&a.y>e.backBtn.y-e.backBtn.height/2&&a.y<e.backBtn.y+e.backBtn.height/2?(e.pen.visible=!1,stage.cursor="pointer",e.pixiStage.cursor="pointer"):(e.pen.visible=!0,stage.cursor="none",e.pixiStage.cursor="none"):(stage.cursor="auto",e.pixiStage.cursor="auto",e.pen.visible=!1,e.pen.x=e.pen.y=-100,e.lineMc&&(e.lineMc.endFill(),e.draw=!1)))}penMouseDown(t){let e=this;e.draw||(e.draw=!0,e.pen.x=t.data.global.x-5,e.pen.y=t.data.global.y-5,e.pen.x>e.lineArea.x&&e.pen.x<e.lineArea.x+e.lineArea.width&&e.pen.y>e.lineArea.y&&e.pen.y<e.lineArea.y+e.lineArea.height&&(e.drawDownX=e.pen.x,e.drawDownY=e.pen.y,e.lineMc=new PIXI.Graphics,e.pixiStage.lineArr.push(e.lineMc),1==e.isStraight&&e.lineMc.moveTo(e.drawDownX,e.drawDownY),e.pixiStage.addChild(e.lineMc),e.pixiStage.setChildIndex(e.pen,e.pixiStage.children.length-3),e.pixiStage.setChildIndex(e.resBtn,e.pixiStage.children.length-1),e.pixiStage.setChildIndex(e.backBtn,e.pixiStage.children.length-2)))}stageMove(t){let e=this;e.lineMc&&e.draw&&(2==e.isStraight&&(e.lineMc.clear(),e.lineMc.moveTo(e.drawDownX,e.drawDownY)),e.lineMc.lineStyle(e.lineWidthNum,"0x"+e.lineColor.substring(1,7),1),e.lineMc.lineTo(t.data.global.x,t.data.global.y))}stageUp(t){let e=this;e.lineMc&&(Math.abs(e.drawDownX-e.pen.x)<5&&Math.abs(e.drawDownY-e.pen.y)<5&&(e.pixiStage.removeChild(this.pixiStage.lineArr[this.pixiStage.lineArr.length-1]),e.pixiStage.lineArr.pop()),e.lineMc.endFill(),e.draw=!1,e.pen&&(e.pen.visible=!1)),e.pen&&(e.pen.visible=!1)}getCurrentTarget(t,e){let a=this;if(a.complete&&null==a.currentDragTarget){a.currentDragTarget=t.target,question.sources[e].content.option1.dragRepeat&&!a.currentDragTarget.repeat&&(a.copyCurrentTarget(e),a.currentDragTarget.repeat=!0);let i=stage.getChildByName("GAME").getChildByName("GAME"+e);i.setChildIndex(a.pixiStage,i.children.length-1),a.pixiStage.setChildIndex(a.currentDragTarget,a.pixiStage.children.length-1),a.currentDragTarget.dragging||(a.currentDragTarget.dragging=!0,a.currentDragTarget.width=a.currentDragTarget.startWidth,a.currentDragTarget.height=a.currentDragTarget.startHeight,a.startCos=t.data.getLocalPosition(a.pixiStage),a.startPos.x=a.currentDragTarget.x,a.startPos.y=a.currentDragTarget.y,a.offsetPos.x=a.startCos.x-a.startPos.x,a.offsetPos.y=a.startCos.y-a.startPos.y),a.complete=!1}}moveTarget(t){if(this.currentDragTarget&&this.currentDragTarget.dragging){let e=this,a=t.data.getLocalPosition(e.pixiStage);e.currentDragTarget.x=a.x-e.offsetPos.x,e.currentDragTarget.y=a.y-e.offsetPos.y,e.currentDragTarget.x>20&&e.currentDragTarget.x<1900&&e.currentDragTarget.y>20&&e.currentDragTarget.y<1060&&(e.currentDragTarget.x+e.currentDragTarget.width/2<parseFloat(e.hitArea.x)+parseFloat(e.hitArea.width)&&e.currentDragTarget.x-e.currentDragTarget.width/2>parseFloat(e.hitArea.x)&&e.currentDragTarget.y+e.currentDragTarget.height/2<parseFloat(e.hitArea.y)+parseFloat(e.hitArea.height)&&e.currentDragTarget.y-e.currentDragTarget.height/2>parseFloat(e.hitArea.y)?e.currentDragTarget.hit=!0:e.currentDragTarget.hit=!1,null!=e.trash&&(e.currentDragTarget.x+e.currentDragTarget.width/2<parseFloat(e.trash.x)||e.currentDragTarget.x-e.currentDragTarget.width/2>parseFloat(e.trash.x)+parseFloat(e.trash.width)||e.currentDragTarget.y+e.currentDragTarget.height/2<parseFloat(e.trash.y)||e.currentDragTarget.y-e.currentDragTarget.height/2>parseFloat(e.trash.y)+parseFloat(e.trash.height)?(e.trash.texture=e.trash.default,e.currentDragTarget.isTrash=!1):(e.trash.texture=e.trash.dicked,e.currentDragTarget.isTrash=!0)))}}leaveTarget(t){let e=this;if(e.currentDragTarget){e.currentDragTarget.dragging=!1;t.data.getLocalPosition(e.pixiStage);e.currentDragTarget.hit?(e.currentDragTarget.isUp=!0,e.currentDragTarget.upX=e.currentDragTarget.x,e.currentDragTarget.upY=e.currentDragTarget.y,e.currentDragTarget.isTrash?(e.pixiStage.removeChild(e.currentDragTarget),e.currentDragTarget=null,e.complete=!0,e.trash.texture=e.trash.default):(e.currentDragTarget=null,e.complete=!0)):e.currentDragTarget.repeat?e.currentDragTarget.isTrash?(e.pixiStage.removeChild(e.currentDragTarget),e.currentDragTarget=null,e.complete=!0,e.trash.texture=e.trash.default):e.currentDragTarget.isUp?u.TweenLite.to(e.currentDragTarget,.5,{x:e.currentDragTarget.upX,y:e.currentDragTarget.upY,onComplete:function(){e.currentDragTarget=null,e.complete=!0}}):u.TweenLite.to(e.currentDragTarget,.5,{x:e.currentDragTarget.startX,y:e.currentDragTarget.startY,onComplete:function(){e.pixiStage.removeChild(e.currentDragTarget),e.currentDragTarget=null,e.complete=!0}}):e.currentDragTarget.isTrash?(e.pixiStage.removeChild(e.currentDragTarget),e.currentDragTarget=null,e.complete=!0,e.trash.texture=e.trash.default):e.currentDragTarget.isUp?u.TweenLite.to(e.currentDragTarget,.5,{x:e.currentDragTarget.upX,y:e.currentDragTarget.upY,onComplete:function(){e.currentDragTarget=null,e.complete=!0}}):u.TweenLite.to(e.currentDragTarget,.5,{x:e.currentDragTarget.startX,y:e.currentDragTarget.startY,onComplete:function(){e.currentDragTarget=null,e.complete=!0}})}}getCurrentKey(t){let e=this;null==e.keycurrentTarget&&e.keyComplete&&(e.keycurrentTarget=t.target,u.TweenLite.to(e.keycurrentTarget,.15,{width:.8*e.keycurrentTarget.width,height:.8*e.keycurrentTarget.height}),e.keyComplete=!1)}leaveKeyTarget(t){let e=this;e.keycurrentTarget&&u.TweenLite.to(e.keycurrentTarget,.15,{width:e.keycurrentTarget.startWidth,height:e.keycurrentTarget.startHeight,onComplete:function(){e.keycurrentTarget=null,e.keyComplete=!0}}),e.draw=!1}copyCurrentTarget(t){let e=this,a=new PIXI.Sprite.fromImage(res[e.currentDragTarget.name].url);a.interactive=!0,a.anchor.set(.5,.5),a.x=e.currentDragTarget.startX,a.y=e.currentDragTarget.startY,a.width=parseFloat(e.currentDragTarget.startWidth),a.height=parseFloat(e.currentDragTarget.startHeight),a.startWidth=e.currentDragTarget.startWidth,a.startHeight=e.currentDragTarget.startHeight,a.startX=e.currentDragTarget.startX,a.startY=e.currentDragTarget.startY,a.name=e.currentDragTarget.name,a.hit=!1,a.isUp=!1,a.upX=null,a.unY=null,a.dragging=!1,a.repeat=!1,a.isTrash=!1,e.pixiStage.addChild(a),e.dragOptionArr.unshift(a),e.dragOptionArr.map((a,i)=>{a.on("pointerover",this.overAndScale.bind(this)),a.on("pointerout",this.outAndScale.bind(this)),a.on("pointerdown",function(a){e.getCurrentTarget.bind(e)(a,t)})})}getChoice(){let t=this;"2"==question.dragShow?(console.log("画笔舞台...."),t.pixiStage.children.map((e,a)=>{null!=e.name&&(-1==e.name.indexOf("blank_drag")&&-1==e.name.indexOf("option")&&-1==e.name.indexOf("trash")||(e.visible=!1),-1!=e.name.indexOf("blanked")&&(t.drawBlankArr.unshift(e),t.drawArr.push(e)))}),console.log(t.drawBlankArr)):"1"==question.dragShow&&(console.log("拖拽舞台...."),t.pixiStage.children.map((e,a)=>{null!=e.name&&(-1!=e.name.indexOf("blanked")||-1!=e.name.indexOf("back")||-1!=e.name.indexOf("reset")?e.visible=!1:(e.visible=!0,t.dragArr.push(e),-1!=e.name.indexOf("blank_drag")&&t.dragBlankArr.unshift(e),-1!=e.name.indexOf("option")&&(new f.a(e,{type:"bounceIn",delay:.3*Math.random()}),t.dragOptionArr.unshift(e)),-1!=e.name.indexOf("trash")&&(t.trash=e)))}))}getBlankChoice(t){let e=this;"2"==question.dragShow?(e.fontFamily=question.sources[t].content.option2.style.fontFamily,e.fontSize=question.sources[t].content.option2.style.fontSize,e.strLength=question.sources[t].content.option2.style.length,e.fontColor=question.sources[t].content.option2.style.color,e.fontWeight=question.sources[t].content.option2.style.strong?"bold":"normal",e.fontStyle=question.sources[t].content.option2.style.italic?"italic":"normal"):(e.fontFamily=question.sources[t].content.option1.style_drag.fontFamily,e.fontSize=question.sources[t].content.option1.style_drag.fontSize,e.strLength=question.sources[t].content.option1.style_drag.length,e.fontColor=question.sources[t].content.option1.style_drag.color,e.fontWeight=question.sources[t].content.option1.style_drag.strong?"bold":"normal",e.fontStyle=question.sources[t].content.option1.style_drag.italic?"italic":""),question.sources[t].content.option1.blank_drag.map((t,a)=>{e.dragBlankArr.map((a,i)=>{if(t.image.componentName==a.name){a.isClick=!1,a.anchor.set(.5,.5),a.x=parseFloat(t.image.x)+parseFloat(t.image.width/2),a.y=parseFloat(t.image.y)+parseFloat(t.image.height/2),a.dicked=PIXI.Texture.fromImage(t.image.name_another.name),a.default=PIXI.Texture.fromImage(t.image.name),a.keys=t.image.keys,a.cursor="text";let i=new PIXI.Text("",{fontFamily:e.fontFamily,fontSize:e.fontSize+"px",fill:e.fontColor,fontWeight:e.fontWeight,fontStyle:e.fontStyle,padding:8});i.anchor.set(.5,.5),0==a.children.length&&a.addChild(i),console.log(a)}})}),question.sources[t].content.option2.blank.map((t,a)=>{e.drawBlankArr.map((a,i)=>{if(t.image.componentName==a.name){a.isClick=!1,a.anchor.set(.5,.5),a.x=parseFloat(t.image.x)+parseFloat(t.image.width/2),a.y=parseFloat(t.image.y)+parseFloat(t.image.height/2),a.dicked=PIXI.Texture.fromImage(t.image.name_another.name),a.default=PIXI.Texture.fromImage(t.image.name),a.keys=t.image.keys,a.cursor="text";let i=new PIXI.Text("",{fontFamily:e.fontFamily,fontSize:e.fontSize+"px",fill:e.fontColor,fontWeight:e.fontWeight,fontStyle:e.fontStyle,padding:8});i.anchor.set(.5,.5),0==a.children.length&&a.addChild(i)}})}),e.dragBlankArr.length>0&&("1"==question.keyChoice?(e.dragBlankArr[0].texture=e.dragBlankArr[0].dicked,e.dragBlankArr[0].isClick=!0):(e.dragBlankArr[0].texture=e.dragBlankArr[0].default,e.dragBlankArr[0].isClick=!1)),e.drawBlankArr.length>0&&("1"==question.keyChoice?(e.drawBlankArr[0].texture=e.drawBlankArr[0].dicked,e.drawBlankArr[0].isClick=!0):(e.drawBlankArr[0].texture=e.drawBlankArr[0].default,e.drawBlankArr[0].isClick=!1)),e.dragBlankArr.map((t,a)=>{t.on("pointerdown",function(){question.comentAudio.pickBlank.show&&question.comentAudio.pickBlank.audio&&res[question.comentAudio.pickBlank.audio].sound.play(),e.dragBlankArr.map((t,e)=>{t.texture=t.default,t.isClick=!1}),t.texture=t.dicked,t.isClick=!0,t.cursor="text",e.keyShow||u.TweenLite.to(e.keyMap,.5,{y:858,onComplete:function(){e.keyShow=!0}})}),e.keySpriteArr.map((a,i)=>{a.on("pointerdown",function(a){e.getCurrentKey.bind(e)(a),t.isClick&&e.getKeyValue.bind(e)(a,t)})})}),e.drawBlankArr.map((t,a)=>{t.on("pointerdown",function(){question.comentAudio.pickBlank.show&&question.comentAudio.pickBlank.audio&&res[question.comentAudio.pickBlank.audio].sound.play(),e.drawBlankArr.map((t,e)=>{t.texture=t.default,t.isClick=!1}),t.texture=t.dicked,console.log(t,"点击"),t.isClick=!0,t.cursor="text",e.keyShow||u.TweenLite.to(e.keyMap,.5,{y:858,onComplete:function(){e.keyShow=!0}}),e.pen&&(e.pen.visible=!1)}),t.on("pointerup",function(t){e.draw=!1,e.pen&&(e.pen.visible=!1)}),e.keySpriteArr.map((a,i)=>{a.on("pointerdown",function(a){e.pen&&(e.pen.visible=!1),e.getCurrentKey.bind(e)(a),t.isClick&&e.getKeyValue.bind(e)(a,t)})})})}getKeyValue(t,e){let a=this;if(a.draw=!1,a.currentTarget=t.target,question.comentAudio.keyBlank.show&&question.comentAudio.keyBlank.audio&&res[question.comentAudio.keyBlank.audio].sound.play(),"del"==a.currentTarget.key)e.children[0].text="";else if("tui"==a.currentTarget.key)e.children[0].text=e.children[0].text.substring(0,e.children[0].text.length-1).replace(/\s*/g,"");else if(e.children[0].text.length<a.strLength)e.children[0].text+=a.currentTarget.key,e.children[0].text=e.children[0].text.replace(/\s*/g,"");else{if(1!=e.children[0].text.length)return;console.log("111111"),e.children[0].text=a.currentTarget.key,e.children[0].text=e.children[0].text.replace(/\s*/g,"")}}overAndScale(t){let e=t.currentTarget;e.cursor="pointer",stage.cursor="pointer",this.pixiStage.cursor="pointer",u.TweenLite.to(e,.4,{width:1.05*e.width,height:1.05*e.height})}outAndScale(t){let e=t.currentTarget;u.TweenLite.to(e,.4,{width:e.startWidth,height:e.startHeight})}stemAudioPause(t){let e=stage.getChildByName("GAME").getChildByName("GAME"+t);window.gameBgAudioStr&&(window.gameBgAudioStr.volume=1),e.children[1].stemAudioStr&&e.children[1].stemAudioStr.pause(),e.children[1].stemSound&&(e.children[1].stemSound.timeScale=0),e.children[1].stemSoundAn&&(e.children[1].stemSoundAn.timeScale=0)}}a("xFqj");let w;var y={name:"start",methods:{createApp:()=>new n.Application({width:1920,height:1080,autoSize:!0,transparent:!0})},components:{},data:()=>({isShow:!1}),created(){document.getElementsByClassName("page-loading")[0].style.display="block"},destroyed(){PIXI.sound.stopAll(),app.destroy()},mounted(){PIXI.sound.stopAll(),window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",window.stage=app.stage;const t=this;t.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object(g.load)().then(e=>{console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),window.question=e.question.data,w=e.question.data,store.state.testNum=w.sources.length;let a=new v.AnswerInfo;Object(v.Loading)(),console.log("选择模板。。。。。",w.dragShow),"2"==w.dragShow?w.sources.map((t,e)=>{t.content.option2.blank.map((e,a)=>{e.image.keys.map((e,a)=>{0==a&&t.rightKey.push(e.value)})})}):"1"==w.dragShow&&w.sources.map((t,e)=>{t.content.option1.blank_drag.map((e,a)=>{e.image.keys.map((e,a)=>{0==a&&t.rightKey.push(e.value)})})}),a.answerDefault({type:2,useranswer:[],times:[]}),Object(v.Question)({id:"0",currentTotalOption:"1"});let i=new p.a(w.one.start,e);if(Object(d.RenderAllData)(!1,w),t.$store.state.pageNumber=parseInt(t.$route.query.id)?parseInt(t.$route.query.id):0,Object(d.RenderPageByIndex)(t.$store.state.pageNumber),t.$route.query.startStatus)if(window.question.one.start.show&&"true"==t.$route.query.startStatus)stage.addChild(i),i.button(()=>{stage.removeChild(i),stage.getChildByName("gameBgSound")&&stage.setChildIndex(stage.getChildByName("gameBgSound"),stage.children.length-1),(new x).exec()});else{(new x).exec()}else if(window.question.one.start.show)stage.addChild(i),i.button(()=>{stage.removeChild(i),stage.getChildByName("gameBgSound")&&stage.setChildIndex(stage.getChildByName("gameBgSound"),stage.children.length-1),(new x).exec()});else{(new x).exec()}})}},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png"}})])},staticRenderFns:[]};var _=a("C7Lr")(y,k,!1,function(t){a("Sp7z")},"data-v-0973325f",null).exports,S=a("Gqta");i.default.use(c.a);var D=new c.a({routes:[{path:"/",component:_},{path:"/edit",component:S.a},{path:"/preview",component:S.b}]}),B=a("4DWU"),C=a.n(B),I=(a("epTE"),a("Otmz")),A=a.n(I),T=a("CtzY"),N=a.n(T);i.default.config.productionTip=!1,i.default.prototype.$http=A.a,i.default.prototype.qs=N.a,i.default.use(C.a),new i.default({el:"#app",router:D,components:{App:m},store:store,template:"<App/>"})},R7CL:function(t,e){},Sp7z:function(t,e){},SpE3:function(t,e){},UYKw:function(t,e,a){"use strict";var i=a("9bLE"),n=a("cLZ2");let s;var o={name:"App",data:()=>({result:window.store.state.result,question:question,resultUrl:void 0}),computed:{goldnum:(t,e)=>window.store.state.goldnum},methods:{click(){window.parent.postMessage({type:"close"},"*")},createApp:()=>new i.Application({width:1920,height:1080,autoSize:!0,transparent:!0})},mounted(){console.log("解析页");let t=this;if(question.one.end.endBg.image.show&&(this.resultUrl=res[question.one.end.endBg.image.name].url),question.one.end.endBg.animate.show){app.stop(),(s=this.createApp()).view.style.width="19.2rem",s.view.style.height="10.8rem",t.$refs.canvas.appendChild(s.view);let e=s.stage,a=Object(n.a)(question.one.end.endBg.animate.name);a.state.setAnimation(1,"animation",question.one.end.endBg.animate.loop);console.log(e),a.x=question.one.end.endBg.animate.x,a.y=question.one.end.endBg.animate.y,a.scale.set(question.one.gameBgSound.scale),e.addChild(a)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result"},[t.question.one.end.endBg.image.show?a("img",{staticClass:"bg",style:{left:t.question.one.end.endBg.image.x/100+"rem",top:t.question.one.end.endBg.image.y/100+"rem",width:t.question.one.end.endBg.image.width/100+"rem",height:t.question.one.end.endBg.image.height/100+"rem"},attrs:{src:t.resultUrl}}):t._e(),t._v(" "),a("img",{staticClass:"close",attrs:{src:"static/images/close.png"},on:{click:function(e){return t.click()}}}),t._v(" "),a("span",{staticClass:"txt",style:{color:t.question.one.end.goldText.color,left:t.question.one.end.goldText.x/100+"rem",top:t.question.one.end.goldText.y/100+"rem",fontSize:t.question.one.end.goldText.fontSize/100+"rem",fontFamily:t.question.one.end.goldText.fontFamily,fontWeight:t.question.one.end.goldText.fontWeight,fontStyle:t.question.one.end.goldText.fontStyle}},[t._v(t._s(t.goldnum))]),t._v(" "),Array.isArray(t.result)&&0!=t.result.length?a("div",[a("ul",{staticClass:"analysisBox"},t._l(t.result,function(e,i){return a("li",{staticClass:"answer"},[1==e.type||2==e.type?a("div",[a("div",{staticClass:"userAnswer"},[a("span",{staticClass:"noun"},[t._v("("+t._s(i+1)+")\n                    "),t._l(e.useranswer,function(i,n){return a("span",{staticClass:"userAnswerData"},[t._v("\n                        "+t._s(i)),a("img",{directives:[{name:"show",rawName:"v-show",value:i==e.answer[n],expression:"data == item.answer[index]"}],staticClass:"rightImg",attrs:{src:"static/images/right.png"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:i!=e.answer[n],expression:"data != item.answer[index]"}],staticClass:"wrongImg",attrs:{src:"static/images/wrong.png"}})])})],2)]),t._v(" "),a("div",{staticClass:"rightAnswer"},[a("span",{staticClass:"rightTxt"},[t._v("    正确答案:")]),t._v(" "),t._l(e.answer,function(e){return a("span",{staticClass:"right"},[t._v("\n                    "+t._s(e)+"\n                    "),a("span",{staticClass:"break"},[t._v("、")])])})],2)]):t._e(),t._v(" "),0==e.type?a("div",[a("div",{staticClass:"userAnswer"},[a("span",{staticClass:"noun"},[t._v("("+t._s(i+1)+")\n                    "),a("span",{staticClass:"userAnswerData"},[t._v("\n                        "+t._s(e.useranswer)),a("img",{directives:[{name:"show",rawName:"v-show",value:e.useranswer==e.answer,expression:"item.useranswer == item.answer"}],staticClass:"rightImg",attrs:{src:"static/images/right.png"}}),a("img",{directives:[{name:"show",rawName:"v-show",value:e.useranswer!=e.answer,expression:"item.useranswer != item.answer"}],staticClass:"wrongImg",attrs:{src:"static/images/wrong.png"}})])])]),t._v(" "),a("div",{staticClass:"rightAnswer"},[a("span",{staticClass:"rightTxt"},[t._v("    正确答案:")]),t._v(" "),a("span",{staticClass:"right"},[t._v("\n                    "+t._s(e.answer)+"\n                    "),a("span",{staticClass:"break"},[t._v("、")])])])]):t._e()])}),0)]):t._e(),t._v(" "),a("div",{ref:"canvas",staticClass:"canvas"}),t._v(" "),a("audio",{attrs:{autoplay:"autoplay",src:"static/audios/result.mp3"}})])},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("rl9v")},"data-v-adc04332",null);e.a=l.exports},"Vd/m":function(t,e){},VvSj:function(t,e,a){"use strict";var i=a("bGgH"),n=a.n(i),s=a("9bLE");var o={name:"EditStart",data:()=>({lockImg:"",unLockImg:"",showStatus:!1,startData:null,publicImage:null,maskStatus:!1,label:"1",startBgStatus:!0,startBtnStatus:!0,gameBgSoundData:null,resourceData:null,tabShowStatus:{startBg:!1,startBtn:!1,gameBgAudio:!1}}),props:["allData"],methods:{verifyNumber(t){let e=/^\d*\.+$/g;return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):e.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setElementStatus(t,e,a,i){let n=t+e.substring(0,1).toUpperCase()+e.substring(1),s=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(n),o=this.startData[t][e];if(s)if("scale"===a)r=o[a],/^-?\d*\.\d+$/.test(r)&&(o[a]=parseFloat(o[a].split(".")[0]+"."+o[a].split(".")[1].substr(0,1))),s[a].set(o[a]);else{if(("x"===a||"width"===a)&&o[a]>1920&&"sprite"!=e&&"animate"!=e)return o[a]=parseFloat(s[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&o[a]>1080&&"sprite"!=e&&"animate"!=e)return o[a]=parseFloat(s[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(o[a]=this.verifyNumber(o[a]),s[a]=o[a]),"width"===a&&o.lock&&(o.height=(o[a]/i).toFixed(0),s.height=o.height),"height"===a&&o.lock&&(o.width=(o[a]*i).toFixed(0),s.width=o.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),o[a]=0;var r},verifyAnimationFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},setBgSoundAttr(t,e){let a=window.stage.getChildByName("gameBgSound"),i=this.gameBgSoundData;if(a)if("scale"===e)n=i[e],/^-?\d*\.\d+$/.test(n)&&(i[e]=parseFloat(i[e].split(".")[0]+"."+i[e].split(".")[1].substr(0,1))),a[e].set(i[e]);else{if(("x"===e||"width"===e)&&i[e]>1920&&"sprite"!=t&&"animate"!=t)return i[e]=parseFloat(a[e]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===e||"height"===e)&&i[e]>1080&&"sprite"!=t&&"animate"!=t)return i[e]=parseFloat(a[e]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==e&&"y"!==e&&"width"!==e&&"height"!==e||(i[e]=this.verifyNumber(i[e]),a[e]=i[e]),"width"===e&&i.lock&&(i.height=(i[e]/ratio).toFixed(0),a.height=i.height),"height"===e&&i.lock&&(i.width=(i[e]*ratio).toFixed(0),a.width=i.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),i[e]=0;var n},isFloat:t=>/^-?\d*\.\d+$/.test(t),getJSON(){this.startData=this.allData.one.start,this.gameBgSoundData=this.allData.one.gameBgSound,this.getResourceData(()=>{this.showStatus=!0,this.startData.startBtn.image.show?this.label="1":this.startData.startBtn.animate.show?this.label="2":this.startData.startBtn.sprite.show?this.label="3":this.label="1"})},setResource(t,e){if(this.startData[t][e].show){let a=t+e.substring(0,1).toUpperCase()+e.substring(1),i=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(a);i&&(i.visible=!0)}else{this.startData[t][e].name="",this.startData[t][e].width&&(this.startData[t][e].width=0),this.startData[t][e].height&&(this.startData[t][e].height=0),this.startData[t][e].x&&(this.startData[t][e].x=0),this.startData[t][e].y&&(this.startData[t][e].y=0),this.startData[t][e].scale&&(this.startData[t][e].scale=1);let a=t+e.substring(0,1).toUpperCase()+e.substring(1),i=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(a),n=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");i&&n.removeChild(i)}},getResourceData(t){this.$http.get("/getResourceJSON",{params:{}}).then(e=>{this.resourceData=e,this.lockImg=this.resourceData.image_lock_on,this.unLockImg=this.resourceData.image_lock_off,t&&t()})},startBtn(t){Object.values(this.startData.startBtn).forEach(t=>{t.show=!1,t.name="",t.x&&(t.x=0),t.y&&(t.y=0),t.width&&(t.width=0),t.height&&(t.height=0),t.scale&&(t.scale=1)}),window.stage.getChildByName("START").children[0].getChildByName("startBtnContainer").removeChildren(),this.startData.startBtn[t].show=!0},setbgAudioStatus(){this.gameBgSoundData.show?this.tabShowStatus.gameBgAudio=!0:(window.stage.getChildByName("gameBgSound")&&window.stage.removeChild(window.stage.getChildByName("gameBgSound")),this.gameBgSoundData.audio="",this.gameBgSoundData.animate_name="",this.gameBgSoundData.x=0,this.gameBgSoundData.y=0,this.tabShowStatus.gameBgAudio=!1)},tabShow(t,e){let a=this.$refs[e];this.tabShowStatus[t]?(this.tabShowStatus[t]=!1,a.className="el-icon-arrow-right"):(Object.keys(this.tabShowStatus).forEach((t,e)=>{this.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0,a.className="el-icon-arrow-down",this.gameBgSoundData.show||(this.tabShowStatus.gameBgAudio=!1,a.className="el-icon-arrow-right"))},uploadImage(t,e,a){let i=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];return-1===["jpg","png"].indexOf(i)?(this.$message({message:"上传类型不符",type:"error"}),void(a.target.value="")):0===a.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="")):a.target.files[0].size/1024/1024>1?(this.$message({message:"上传文件大小在1M以内",type:"warning"}),void(a.target.value="")):void this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{this.startData[t][e].name=i.resourceName,this.getResourceData();let o=t+e.substring(0,1).toUpperCase()+e.substring(1),r=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(o),l=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");r?(r.texture=new s.Texture.fromImage(i.path),"startBg"!==t&&new n.a(r,(a,i)=>{this.startData[t][e].x=a.toFixed(1),this.startData[t][e].y=i.toFixed(1)}),this.startData[t][e].show?r.visible=!0:r.visible=!1):((r=new s.Sprite.fromImage(i.path)).name=o,r.x=0,r.y=0,l.addChild(r),"startBg"!==t&&new n.a(r,(a,i)=>{this.startData[t][e].x=a.toFixed(1),this.startData[t][e].y=i.toFixed(1)}),this.startData[t][e].show?r.visible=!0:r.visible=!1),"startBg"!==t&&(this.startData[t][e].width=i.width,this.startData[t][e].height=i.height,this.startData[t][e].x?this.startData[t][e].x=this.startData[t][e].x:this.startData[t][e].x=0,this.startData[t][e].y?this.startData[t][e].y=this.startData[t][e].y:this.startData[t][e].y=0),r.width=i.width,r.height=i.height,a.target.value=""})},verifySpriteFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},uploadAnimation(t,e){if(0===e.target.files.length||3!==e.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="");if(!this.verifyAnimationFiles(e.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(e.target.value="");let a={};Object.values(e.target.files).forEach((t,e)=>{a["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",a,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{if(console.log(a.path),e.target.value="","gameBgAudio"===t){this.gameBgSoundData.animate_name=a.resourceName,this.gameBgSoundData.scale=1;let t,e=window.stage;if(window.stage.getChildByName("gameBgSound")){let i=(t=window.stage.getChildByName("gameBgSound")).x,s=t.y;e.removeChild(t);let o=(new Date).getTime();PIXI.loader.add("animation"+o,a.path),PIXI.loader.load((a,r)=>{(t=new PIXI.spine.Spine(r["animation"+o].spineData)).x=i,t.y=s,t.name="gameBgSound",t.state.setAnimation(1,"animation",!0),e.addChild(t),e.setChildIndex(t,e.children.length-1),new n.a(t,(t,e)=>{this.gameBgSoundData.x=t.toFixed(1),this.gameBgSoundData.y=e.toFixed(1)})}),this.allData.one.gameBgSound.show&&this.allData.one.gameBgSound.audio?t&&(t.visible=!0):t&&(t.visible=!1)}else{this.gameBgSoundData.x=0,this.gameBgSoundData.y=0;let i=(new Date).getTime();PIXI.loader.add("animation"+i,a.path),PIXI.loader.load((a,s)=>{(t=new PIXI.spine.Spine(s["animation"+i].spineData)).name="gameBgSound",t.x=0,t.y=0,t.state.setAnimation(1,"animation",!0),e.addChild(t),e.setChildIndex(t,e.children.length-1),new n.a(t,(t,e)=>{this.gameBgSoundData.x=t.toFixed(1),this.gameBgSoundData.y=e.toFixed(1)}),this.allData.one.gameBgSound.show&&this.allData.one.gameBgSound.audio?t&&(t.visible=!0):t&&(t.visible=!1)})}}else{this.startData[t].animate.name=a.resourceName;let e=t+"Animate",i=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(e),s=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(i){let o=i.x,r=i.y;s.removeChild(i);let l=(new Date).getTime();PIXI.loader.add("animation"+l,a.path),PIXI.loader.load((a,m)=>{(i=new PIXI.spine.Spine(m["animation"+l].spineData)).x=o,i.y=r,i.scale.set(this.startData[t].animate.scale),i.name=e,i.state.setAnimation(1,"animation",!0),s.addChild(i),new n.a(i,(e,a)=>{this.startData[t].animate.x=e.toFixed(1),this.startData[t].animate.y=a.toFixed(1)}),this.startData[t].animate.show?i&&(i.visible=!0):i&&(i.visible=!1)})}else{this.startData[t].animate.x=0,this.startData[t].animate.y=0;let o=(new Date).getTime();PIXI.loader.add("animation"+o,a.path),PIXI.loader.load((a,r)=>{(i=new PIXI.spine.Spine(r["animation"+o].spineData)).x=0,i.y=0,i.scale.set(this.startData[t].animate.scale),i.name=e,i.state.setAnimation(1,"animation",!0),s.addChild(i),new n.a(i,(e,a)=>{this.startData[t].animate.x=e.toFixed(1),this.startData[t].animate.y=a.toFixed(1)}),this.startData[t].animate.show?i&&(i.visible=!0):i&&(i.visible=!1)})}}})},uploadSprite(t,e){if(0===e.target.files.length||2!==e.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="");if(!this.verifySpriteFiles(e.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(e.target.value="");let a={};Object.values(e.target.files).forEach((t,e)=>{a["sprite"+(e+1)]=t}),console.log(a),this.$http.post("/uploadingSprite",a,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{e.target.value="";this.startData[t].sprite.name=a.resourceName;let i=t+"Sprite",s=window.stage.getChildByName("START").children[0].getChildByName(t+"Container").getChildByName(i),o=window.stage.getChildByName("START").children[0].getChildByName(t+"Container");if(s){let e=s.x,r=s.y;o.removeChild(s);let l=(new Date).getTime();console.log(l),PIXI.loader.add("sprite"+l,a.path),PIXI.loader.load((a,m)=>{let c=m["sprite"+l].spritesheet,d=[];for(let t in c.textures)d.push(c.textures[t]);(s=new PIXI.extras.AnimatedSprite(d)).x=e,s.y=r,s.scale.set(this.startData[t].sprite.scale),s.animationSpeed=1,s.play(),s.name=i,o.addChild(s),new n.a(s,(e,a)=>{this.startData[t].sprite.x=e.toFixed(1),this.startData[t].sprite.y=a.toFixed(1)}),this.startData[t].sprite.show?s&&(s.visible=!0):s&&(s.visible=!1)})}else{this.startData[t].sprite.x=0,this.startData[t].sprite.y=0;let e=(new Date).getTime();PIXI.loader.add("sprite"+e,a.path),PIXI.loader.load((a,r)=>{let l=r["sprite"+e].spritesheet,m=[];for(let t in l.textures)m.push(l.textures[t]);(s=new PIXI.extras.AnimatedSprite(m)).x=0,s.y=0,s.scale.set(this.startData[t].sprite.scale),s.animationSpeed=1,s.play(),s.name=i,o.addChild(s),new n.a(s,(e,a)=>{this.startData[t].sprite.x=e.toFixed(1),this.startData[t].sprite.y=a.toFixed(1)}),this.startData[t].sprite.show?s&&(s.visible=!0):s&&(s.visible=!1)})}})},uploadAudio(t){let e=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];return-1===["mp3","wav"].indexOf(e)?(this.$message({message:"上传类型不符",type:"error"}),void(t.target.value="")):0===t.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(t.target.value="")):void this.$http.post("/uploadingAudio",{audio:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{t.target.value="",this.gameBgSoundData.audio=e.resourceName;let a=stage.getChildByName("gameBgSound");this.allData.one.gameBgSound.show&&this.allData.one.gameBgSound.animate_name?a&&(a.visible=!0):a&&(a.visible=!1)})},showBigImage(t){this.maskStatus=!0,this.publicImage=t.target.src},controlStartPage(t){let e=stage.getChildByName("gameBgSound"),a=stage.getChildByName("START");t?(e&&(e.visible=!0),a&&(a.visible=!0)):(e&&(e.visible=!1),a&&(a.visible=!1))},lockStatusData(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");t.image.lock?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height),t.image.lock=!0)}else this.$message({type:"warning",message:"舞台未绑定元素!"})}},mounted(){this.getJSON(),this.controlStartPage(this.startData.show)}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"start"},[a("el-switch",{staticStyle:{"margin-left":"15px"},attrs:{"active-color":"#77DC04","active-text":"是否应用","inactive-color":"#ff4949"},on:{change:function(e){return t.controlStartPage(t.startData.show)}},model:{value:t.startData.show,callback:function(e){t.$set(t.startData,"show",e)},expression:"startData.show"}}),t._v(" "),t.startData.show?a("div",{staticStyle:{"margin-top":"8px"}},[a("div",{staticClass:"start-title"},[a("i",{ref:"startBgTitle",class:t.tabShowStatus.startBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBg","startBgTitle")}}},[t._v("\n                背景图\n            ")])]),t._v(" "),t.tabShowStatus.startBg?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","image")}},model:{value:t.startData.startBg.image.show,callback:function(e){t.$set(t.startData.startBg.image,"show",e)},expression:"startData.startBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBg.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBg","image",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","sprite")}},model:{value:t.startData.startBg.sprite.show,callback:function(e){t.$set(t.startData.startBg.sprite,"show",e)},expression:"startData.startBg.sprite.show"}},[t._v("精灵序列图")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                    精灵文件：\n                ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","x")}},model:{value:t.startData.startBg.sprite.x,callback:function(e){t.$set(t.startData.startBg.sprite,"x",e)},expression:"startData.startBg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","y")}},model:{value:t.startData.startBg.sprite.y,callback:function(e){t.$set(t.startData.startBg.sprite,"y",e)},expression:"startData.startBg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","sprite","scale")}},model:{value:t.startData.startBg.sprite.scale,callback:function(e){t.$set(t.startData.startBg.sprite,"scale",e)},expression:"startData.startBg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.sprite.loop,callback:function(e){t.$set(t.startData.startBg.sprite,"loop",e)},expression:"startData.startBg.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("startBg","animate")}},model:{value:t.startData.startBg.animate.show,callback:function(e){t.$set(t.startData.startBg.animate,"show",e)},expression:"startData.startBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","x")}},model:{value:t.startData.startBg.animate.x,callback:function(e){t.$set(t.startData.startBg.animate,"x",e)},expression:"startData.startBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","y")}},model:{value:t.startData.startBg.animate.y,callback:function(e){t.$set(t.startData.startBg.animate,"y",e)},expression:"startData.startBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBg","animate","scale")}},model:{value:t.startData.startBg.animate.scale,callback:function(e){t.$set(t.startData.startBg.animate,"scale",e)},expression:"startData.startBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBg.animate.loop,callback:function(e){t.$set(t.startData.startBg.animate,"loop",e)},expression:"startData.startBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"startBtnTitle",class:t.tabShowStatus.startBtn?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("startBtn","startBtnTitle")}}},[t._v("\n                开始按钮\n            ")])]),t._v(" "),t.tabShowStatus.startBtn?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"edit-radio-title"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.startBtn("image")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("图片")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.startBtn("animate")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("动画")]),t._v(" "),a("el-radio",{attrs:{label:"3"},on:{change:function(e){return t.startBtn("sprite")}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("精灵序列")])],1),t._v(" "),"1"===t.label?a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.startData.startBtn.image.name],alt:"",width:"131",height:"96"},on:{click:function(e){return t.showBigImage(e)}}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("startBtn","image",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","x")}},model:{value:t.startData.startBtn.image.x,callback:function(e){t.$set(t.startData.startBtn.image,"x",e)},expression:"startData.startBtn.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","y")}},model:{value:t.startData.startBtn.image.y,callback:function(e){t.$set(t.startData.startBtn.image,"y",e)},expression:"startData.startBtn.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","width",t.startData.startBtn.image.ratio)}},model:{value:t.startData.startBtn.image.width,callback:function(e){t.$set(t.startData.startBtn.image,"width",e)},expression:"startData.startBtn.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRatio:t.startData.startBtn.image.ratio}},[a("img",{attrs:{src:t.startData.startBtn.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.startData.startBtn,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","image","height",t.startData.startBtn.image.ratio)}},model:{value:t.startData.startBtn.image.height,callback:function(e){t.$set(t.startData.startBtn.image,"height",e)},expression:"startData.startBtn.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1):t._e(),t._v(" "),"2"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","x")}},model:{value:t.startData.startBtn.animate.x,callback:function(e){t.$set(t.startData.startBtn.animate,"x",e)},expression:"startData.startBtn.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","y")}},model:{value:t.startData.startBtn.animate.y,callback:function(e){t.$set(t.startData.startBtn.animate,"y",e)},expression:"startData.startBtn.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","animate","scale")}},model:{value:t.startData.startBtn.animate.scale,callback:function(e){t.$set(t.startData.startBtn.animate,"scale",e)},expression:"startData.startBtn.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.animate.loop,callback:function(e){t.$set(t.startData.startBtn.animate,"loop",e)},expression:"startData.startBtn.animate.loop"}})],1)],1):t._e(),t._v(" "),"3"===t.label?a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                        精灵文件：\n                    ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.startData.startBtn.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite("startBtn",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","x")}},model:{value:t.startData.startBtn.sprite.x,callback:function(e){t.$set(t.startData.startBtn.sprite,"x",e)},expression:"startData.startBtn.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","y")}},model:{value:t.startData.startBtn.sprite.y,callback:function(e){t.$set(t.startData.startBtn.sprite,"y",e)},expression:"startData.startBtn.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus("startBtn","sprite","scale")}},model:{value:t.startData.startBtn.sprite.scale,callback:function(e){t.$set(t.startData.startBtn.sprite,"scale",e)},expression:"startData.startBtn.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.startData.startBtn.sprite.loop,callback:function(e){t.$set(t.startData.startBtn.sprite,"loop",e)},expression:"startData.startBtn.sprite.loop"}})],1)],1):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"start-title"},[a("i",{ref:"gameBgAudioTitle",class:t.tabShowStatus.gameBgAudio?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("gameBgAudio","gameBgAudioTitle")}}},[t._v("\n                背景音乐\n            ")]),t._v(" "),a("el-switch",{staticClass:"edit-title-switch",attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{change:function(e){return t.setbgAudioStatus()}},model:{value:t.gameBgSoundData.show,callback:function(e){t.$set(t.gameBgSoundData,"show",e)},expression:"gameBgSoundData.show"}})],1),t._v(" "),t.tabShowStatus.gameBgAudio&&!0===t.gameBgSoundData.show?a("div",{staticClass:"start-inner"},[a("div",{staticClass:"bg-audio-title"},[t._v("\n                音频\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.gameBgSoundData.audioVolume,callback:function(e){t.$set(t.gameBgSoundData,"audioVolume",e)},expression:"gameBgSoundData.audioVolume"}})],1),t._v(" "),a("div",{staticClass:"edit-switch-audio"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.gameBgSoundData.loop,callback:function(e){t.$set(t.gameBgSoundData,"loop",e)},expression:"gameBgSoundData.loop"}})],1)]),t._v(" "),a("div",{staticClass:"bg-audio-title"},[t._v("\n                图标动画\n            ")]),t._v(" "),a("div",{staticClass:"bg-audio-inner"},[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.gameBgSoundData.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation("gameBgAudio",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","x")}},model:{value:t.gameBgSoundData.x,callback:function(e){t.$set(t.gameBgSoundData,"x",e)},expression:"gameBgSoundData.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","y")}},model:{value:t.gameBgSoundData.y,callback:function(e){t.$set(t.gameBgSoundData,"y",e)},expression:"gameBgSoundData.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setBgSoundAttr("animate","scale")}},model:{value:t.gameBgSoundData.scale,callback:function(e){t.$set(t.gameBgSoundData,"scale",e)},expression:"gameBgSoundData.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2)],1)]):t._e()]):t._e(),t._v(" "),t.maskStatus?a("div",{staticClass:"mask",on:{click:function(e){t.maskStatus=!1}}},[a("img",{attrs:{src:t.publicImage,alt:""}})]):t._e()],1):t._e()},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("2Xa+")},"data-v-ae69fac0",null).exports,m={name:"EditGamePublic",data(){return{lockImg:this.resourceData.image_lock_on,unLockImg:this.resourceData.image_lock_off,fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],textAlign:[{label:"左对齐",value:"left"},{label:"右对齐",value:"right"},{label:"居中对齐",value:"center"},{label:"两端对齐",value:"justify"}]}},props:["allData","gameData","resourceData","tabShowStatus","item","index"],methods:{verifyNumber(t){let e=/^\d*\.+$/g;return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):e.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setElementStatus(t,e,a,i,n){let s="",o=(s="bgImage"===e?"gameBg":"stem")+a.substring(0,1).toUpperCase()+a.substring(1),r=window.stage.getChildByName("GAME").getChildByName("GAME"+t).children[0].getChildByName(s+"Container").getChildByName(o),l=this.gameData[t][e][a];if(r)if("scale"===i)m=l[i],/^-?\d*\.\d+$/.test(m)&&(l[i]=parseFloat(l[i].split(".")[0]+"."+l[i].split(".")[1].substr(0,1))),r[i].set(l[i]);else{if(("x"===i||"width"===i)&&l[i]>1920&&"sprite"!=a&&"animate"!=a)return l[i]=parseFloat(r[i]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===i||"height"===i)&&l[i]>1080&&"sprite"!=a&&"animate"!=a)return l[i]=parseFloat(r[i]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i||(l[i]=this.verifyNumber(l[i]),r[i]=l[i]),"width"===i&&l.lock&&(l.height=(l[i]/n).toFixed(0),r.height=l.height),"height"===i&&l.lock&&(l.width=(l[i]*n).toFixed(0),r.width=l.width)}else this.$message({type:"warning",message:"舞台未绑定元素"}),l[i]=0;var m},setSubTitileAttr(t,e){let a="";a="soundImg"===t?"stemSound":"stemText";let i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName(a);if(i){if("x"===e&&this.item.subTitle[t][e]>1920)return this.$message.error("输入数值超出范围 应为0-1920"),void(this.item.subTitle[t][e]=i[e]);if("y"===e&this.item.subTitle[t][e]>1080)return this.$message.error("输入数值超出范围 应为0-1080"),void(this.item.subTitle[t][e]=i[e]);if(this.isFloat(parseFloat(this.item.subTitle[t][e])))this.item.subTitle[t][e]=parseFloat(this.item.subTitle[t][e].split(".")[0]+"."+this.item.subTitle[t][e].split(".")[1].substr(0,1));else{this.item.subTitle[t][e];this.item.subTitle[t][e]&&/^\d*\.+$/g.test(this.item.subTitle[t][e])?this.item.subTitle[t][e]=parseFloat(this.item.subTitle[t][e])+".":this.item.subTitle[t][e]=this.item.subTitle[t][e]?parseFloat(this.item.subTitle[t][e]):0}parseFloat(this.item.subTitle[t][e])<0&&(this.item.subTitle[t][e]=i[e]),i[e]=this.item.subTitle[t][e]}},setStemTextStatus(t){let e=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");e&&(e.visible=!!t)},setStemText(t){let e=this.item.subTitle,a=window.stage.getChildByName("GAME"),i=a.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText"),o=/^\d{1,3}$/;if("letterSpacing"!==t&&"lineHeight"!==t||(o=/^0?-\d?\.?\d?$/),"width"===t&&(e.stem[t]>1920||e.stem[t]<0))return e.stem.width=i._style.wordWrapWidth,void this.$message.error("输入数值超出范围 应为0-1920");if("fontSize"==t)if(0==e.stem[t]){if(i)return void(i.visible=!1)}else i&&(i.visible=!0);if("fontSize"==t){if(!o.test(e.stem[t]))return void this.$message({type:"error",message:"输入错误"});e.stem[t]>120&&(e.stem[t]=120,this.$message({type:"warning",message:"超过最大字体120"}))}"lineHeight"!=t&&"letterSpacing"!=t||(o.test(e.stem[t])?e.stem[t]=parseFloat(e.stem[t])?parseFloat(e.stem[t]).toFixed(0):"-":e.stem[t]=parseFloat(e.stem[t])?parseFloat(e.stem[t]).toFixed(0):0),"width"==t&&(e.stem[t]=this.verifyNumber(e.stem[t])),e.stem.color=e.stem.color?e.stem.color:"#000";let r=new PIXI.TextStyle({fontFamily:e.stem.fontFamily,fontSize:parseInt(e.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(e.stem.width),breakWords:!0,lineHeight:parseInt(e.stem.lineHeight),letterSpacing:parseInt(e.stem.letterSpacing),align:e.stem.textAlign,fill:e.stem.color,width:e.stem.width,fontWeight:e.stem.strong?"bold":"",fontStyle:e.stem.italic?"italic":"",padding:40});if(i){if("text"===t)return void i.setText(e.stem.text);i.setStyle(r),e.stem.show?i.visible=!0:i.visible=!1}else{let t=new s.Text(e.stem.text,r);new n.a(t,(t,e)=>{this.item.subTitle.stem.x=t.toFixed(1),this.item.subTitle.stem.y=e.toFixed(1)}),t.name="stemText",console.log(t),a.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].addChild(t),e.stem.show?t.visible=!0:t.visible=!1}},setResource(t,e,a){if("subTitle"===e)if(this.gameData[t][e].audioShow){let a="";a="bgImage"===e?"gameBg":"stem";let i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");i&&this.gameData[t][e].audio&&(i.visible=!0)}else{this.gameData[t][e].audio="",this.gameData[t][e].soundImg.animate_name="",this.gameData[t][e].soundImg.x&&(this.gameData[t][e].soundImg.x=0),this.gameData[t][e].soundImg.y&&(this.gameData[t][e].soundImg.y=0),this.gameData[t][e].soundImg.width&&(this.gameData[t][e].soundImg.width=0),this.gameData[t][e].soundImg.height&&(this.gameData[t][e].soundImg.height=0),this.gameData[t][e].soundImg.scale&&(this.gameData[t][e].soundImg.scale=1);let a=window.stage.getChildByName("GAME"),i=a.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0],n=a.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");n&&i.removeChild(n)}else if(this.gameData[t][e][a].show){let i="";i="bgImage"===e?"gameBg":"stem";let n=window.stage.getChildByName("GAME"),s=i+a.substring(0,1).toUpperCase()+a.substring(1),o=n.getChildByName("GAME"+t).children[0].getChildByName(i+"Container").getChildByName(s);o&&(o.visible=!0)}else{this.gameData[t][e][a].name="",this.gameData[t][e][a].x&&(this.gameData[t][e][a].x=0),this.gameData[t][e][a].y&&(this.gameData[t][e][a].y=0),this.gameData[t][e][a].width&&(this.gameData[t][e][a].width=0),this.gameData[t][e][a].height&&(this.gameData[t][e][a].height=0),this.gameData[t][e][a].scale&&(this.gameData[t][e][a].scale=1);let i="";i="bgImage"===e?"gameBg":"stem";let n=window.stage.getChildByName("GAME"),s=i+a.substring(0,1).toUpperCase()+a.substring(1),o=n.getChildByName("GAME"+t).children[0].getChildByName(i+"Container").getChildByName(s),r=n.getChildByName("GAME"+t).children[0].getChildByName(i+"Container");o&&r.removeChild(o)}},tabShow(t,e){let a=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,a.className="el-icon-arrow-right"):(Object.keys(this.tabShowStatus[t].child).forEach((e,a)=>{this.tabShowStatus[t].child[e]=!1}),this.tabShowStatus[t].child[e]=!0,a.className="el-icon-arrow-down")},setGoldTextFontStyle(t,e){this.gameData[e].subTitle.stem[t]=!this.gameData[e].subTitle.stem[t];let a=this.item.subTitle,i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemText");if(i){let t=new PIXI.TextStyle({fontFamily:a.stem.fontFamily,fontSize:parseInt(a.stem.fontSize),wordWrap:!0,wordWrapWidth:parseInt(a.stem.width),breakWords:!0,lineHeight:parseInt(a.stem.lineHeight),letterSpacing:parseInt(a.stem.letterSpacing),align:a.stem.textAlign,fill:a.stem.color,width:a.stem.width,fontWeight:a.stem.strong?"bold":"",fontStyle:a.stem.italic?"italic":"",padding:40});i.setStyle(t)}},isFloat:t=>/^-?\d*\.\d+$/.test(t),uploadImage(t,e,a){let i=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];return-1===["jpg","png","JPG"].indexOf(i)?(this.$message({message:"上传类型不符",type:"error"}),void(a.target.value="")):0===a.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="")):a.target.files[0].size/1024/1024>1?(this.$message({message:"上传文件大小在1M以内",type:"warning"}),void(a.target.value="")):void this.$http.post("/uploadingImage",{image:a.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{this.gameData[t][e].image.name=i.resourceName,this.updateResourceData();let o="";o="bgImage"===e?"gameBg":"stem";let r=window.stage.getChildByName("GAME"),l=o+"Image".substring(0,1).toUpperCase()+"Image".substring(1),m=r.getChildByName("GAME"+t).children[0].getChildByName(o+"Container").getChildByName(l),c=r.getChildByName("GAME"+t).children[0].getChildByName(o+"Container");m?(PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((a,o)=>{m.texture=new s.Texture.fromImage(o[i.resourceName].url),m.width=i.width,m.height=i.height,"bgImage"!==e&&new n.a(m,(a,i)=>{this.gameData[t][e].image.x=a.toFixed(1),this.gameData[t][e].image.y=i.toFixed(1)}),this.gameData[t][e].image.show?m.visible=!0:m.visible=!1})):(this.gameData[t][e].image.x=0,this.gameData[t][e].image.y=0,PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((a,o)=>{(m=new s.Sprite.fromImage(o[i.resourceName].url)).name=l,m.x=0,m.y=0,m.width=i.width,m.height=i.height,c.addChild(m),"bgImage"!==e&&new n.a(m,(a,i)=>{this.gameData[t][e].image.x=a.toFixed(1),this.gameData[t][e].image.y=i.toFixed(1)}),this.gameData[t][e].image.show?m.visible=!0:m.visible=!1})),"bgImage"!==e&&(this.gameData[t][e].image.width=i.width,this.gameData[t][e].image.height=i.height),a.target.value=""})},verifySpriteFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},uploadSprite(t,e,a){if(0===a.target.files.length||2!==a.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="");if(!this.verifySpriteFiles(a.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(a.target.value="");let i={};Object.values(a.target.files).forEach((t,e)=>{i["sprite"+(e+1)]=t}),console.log(i),this.$http.post("/uploadingSprite",i,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{a.target.value="",this.gameData[t][e].sprite.name=i.resourceName;let s="",o=(s="bgImage"===e?"gameBg":"stem")+"Sprite",r=window.stage.getChildByName("GAME"),l=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container").getChildByName(o),m=r.getChildByName("GAME"+t).children[0].getChildByName(s+"Container");if(console.log(m),l){let a=l.x,s=l.y;m.removeChild(l),window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((r,c)=>{let d=c[i.resourceName].spritesheet,g=[];for(let t in d.textures)g.push(d.textures[t]);(l=new PIXI.extras.AnimatedSprite(g)).x=a,l.y=s,l.scale.set(this.gameData[t][e].sprite.scale),l.animationSpeed=1,l.play(),l.name=o,m.addChild(l),new n.a(l,(a,i)=>{this.gameData[t][e].sprite.x=a.toFixed(1),this.gameData[t][e].sprite.y=i.toFixed(1)}),this.gameData[t][e].sprite.show?l.visible=!0:l.visible=!1})}else this.gameData[t][e].sprite.x=0,this.gameData[t][e].sprite.y=0,window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((a,s)=>{let r=s[i.resourceName].spritesheet,c=[];for(let t in r.textures)c.push(r.textures[t]);(l=new PIXI.extras.AnimatedSprite(c)).x=0,l.y=0,l.scale.set(this.gameData[t][e].sprite.scale),l.animationSpeed=1,l.play(),l.name=o,m.addChild(l),new n.a(l,(a,i)=>{this.gameData[t][e].sprite.x=a.toFixed(1),this.gameData[t][e].sprite.y=i.toFixed(1)}),this.gameData[t][e].sprite.show?l.visible=!0:l.visible=!1})})},uploadAudio(t,e){let a=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];return-1===["mp3","wav"].indexOf(a)?(this.$message({message:"上传类型不符",type:"error"}),void(e.target.value="")):0===e.target.files.length?(this.$message({message:"上传文件个数不符合",type:"warning"}),void(e.target.value="")):void this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.gameData[t].subTitle.audio=a.resourceName,e.target.value="";let i=window.stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName("stemSound");this.gameData[t].subTitle.audioShow&&this.gameData[t].subTitle.soundImg.animate_name?i&&(i.visible=!0):i&&(i.visible=!1)})},verifyAnimationFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},uploadAnimation(t,e,a){if(0===a.target.files.length||3!==a.target.files.length)return this.$message({message:"上传文件个数不符合",type:"warning"}),void(a.target.value="");if(!this.verifyAnimationFiles(a.target.files))return this.$message({message:"上传文件不符合",type:"warning"}),void(a.target.value="");let i={};Object.values(a.target.files).forEach((t,e)=>{i["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",i,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{if(a.target.value="","soundImg"!==e){this.gameData[t][e].animate.name=i.resourceName;let a="",s=(a="bgImage"===e?"gameBg":"stem")+"Animate",o=window.stage.getChildByName("GAME"),r=o.getChildByName("GAME"+t).children[0].getChildByName(a+"Container").getChildByName(s),l=o.getChildByName("GAME"+t).children[0].getChildByName(a+"Container");if(r){let a=r.x,o=r.y;l.removeChild(r),window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((m,c)=>{(r=new PIXI.spine.Spine(c[i.resourceName].spineData)).x=a,r.y=o,r.scale.set(this.gameData[t][e].animate.scale),r.name=s,r.state.setAnimation(1,"animation",!1),l.addChild(r),new n.a(r,(a,i)=>{this.gameData[t][e].animate.x=a.toFixed(1),this.gameData[t][e].animate.y=i.toFixed(1)}),this.gameData[t][e].animate.show?r.visible=!0:r.visible=!1})}else{this.gameData[t][e].animate.x=0,this.gameData[t][e].animate.y=0;(new Date).getTime();window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((a,o)=>{(r=new PIXI.spine.Spine(o[i.resourceName].spineData)).x=0,r.y=0,r.scale.set(this.gameData[t][e].animate.scale),r.name=s,r.state.setAnimation(1,"animation",!1),l.addChild(r),new n.a(r,(a,i)=>{this.gameData[t][e].animate.x=a.toFixed(1),this.gameData[t][e].animate.y=i.toFixed(1)}),this.gameData[t][e].animate.show?r.visible=!0:r.visible=!1})}}else{this.gameData[t].subTitle[e].animate_name=i.resourceName,this.gameData[t].subTitle.soundImg.scale=1;let a="stemSound",s=window.stage.getChildByName("GAME"),o=s.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0].getChildByName(a),r=s.getChildByName("GAME"+this.index).getChildByName("STEMTITLE").children[0];if(o){let e=o.x,s=o.y;r.removeChild(o),window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((l,m)=>{(o=new PIXI.spine.Spine(m[i.resourceName].spineData)).name=a,o.state.setAnimation(1,"animation",!1),r.addChild(o),o.x=e,o.y=s,new n.a(o,(e,a)=>{this.gameData[t].subTitle.soundImg.x=e.toFixed(1),this.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),this.gameData[t].subTitle.audioShow&&this.gameData[t].subTitle.audio?o.visible=!0:o.visible=!1})}else this.gameData[t].subTitle.soundImg.x=0,this.gameData[t].subTitle.soundImg.y=0,window.res.hasOwnProperty(i.resourceName)||PIXI.loader.add(i.resourceName,i.path),PIXI.loader.load((e,s)=>{(o=new PIXI.spine.Spine(s[i.resourceName].spineData)).x=0,o.y=0,o.name=a,o.state.setAnimation(1,"animation",!1),r.addChild(o),new n.a(o,(e,a)=>{this.gameData[t].subTitle.soundImg.x=e.toFixed(1),this.gameData[t].subTitle.soundImg.y=a.toFixed(1)}),this.gameData[t].subTitle.audioShow&&this.gameData[t].subTitle.audio?o.visible=!0:o.visible=!1})}a.target.value=""})},updateResourceData(){this.$emit("updateResourceData")},lockStatusData(t,e){if(t.image.show&&t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.lock=!0,t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title"},[a("i",{ref:"bgImageTitle",class:t.tabShowStatus[t.index].child.bgImage?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"bgImage")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"bgImage")}}},[t._v("\n        背景图\n    ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.bgImage,expression:"tabShowStatus[index].child.bgImage"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","image")}},model:{value:t.item.bgImage.image.show,callback:function(e){t.$set(t.item.bgImage.image,"show",e)},expression:"item.bgImage.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.bgImage.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"bgImage",e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","sprite")}},model:{value:t.item.bgImage.sprite.show,callback:function(e){t.$set(t.item.bgImage.sprite,"show",e)},expression:"item.bgImage.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","x")}},model:{value:t.item.bgImage.sprite.x,callback:function(e){t.$set(t.item.bgImage.sprite,"x",e)},expression:"item.bgImage.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","y")}},model:{value:t.item.bgImage.sprite.y,callback:function(e){t.$set(t.item.bgImage.sprite,"y",e)},expression:"item.bgImage.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","sprite","scale")}},model:{value:t.item.bgImage.sprite.scale,callback:function(e){t.$set(t.item.bgImage.sprite,"scale",e)},expression:"item.bgImage.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.sprite.loop,callback:function(e){t.$set(t.item.bgImage.sprite,"loop",e)},expression:"item.bgImage.sprite.loop"}})],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"bgImage","animate")}},model:{value:t.item.bgImage.animate.show,callback:function(e){t.$set(t.item.bgImage.animate,"show",e)},expression:"item.bgImage.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.bgImage.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"bgImage",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","x")}},model:{value:t.item.bgImage.animate.x,callback:function(e){t.$set(t.item.bgImage.animate,"x",e)},expression:"item.bgImage.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","y")}},model:{value:t.item.bgImage.animate.y,callback:function(e){t.$set(t.item.bgImage.animate,"y",e)},expression:"item.bgImage.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"bgImage","animate","scale")}},model:{value:t.item.bgImage.animate.scale,callback:function(e){t.$set(t.item.bgImage.animate,"scale",e)},expression:"item.bgImage.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.bgImage.animate.loop,callback:function(e){t.$set(t.item.bgImage.animate,"loop",e)},expression:"item.bgImage.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"stemImgTitle",class:t.tabShowStatus[t.index].child.stemImg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"stemImg")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"stemImg")}}},[t._v("\n            题干\n        ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.stemImg,expression:"tabShowStatus[index].child.stemImg"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","image")}},model:{value:t.item.stemImg.image.show,callback:function(e){t.$set(t.item.stemImg.image,"show",e)},expression:"item.stemImg.image.show"}},[t._v("图片\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.stemImg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","x")}},model:{value:t.item.stemImg.image.x,callback:function(e){t.$set(t.item.stemImg.image,"x",e)},expression:"item.stemImg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","y")}},model:{value:t.item.stemImg.image.y,callback:function(e){t.$set(t.item.stemImg.image,"y",e)},expression:"item.stemImg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","width",t.item.stemImg.image.ratio)}},model:{value:t.item.stemImg.image.width,callback:function(e){t.$set(t.item.stemImg.image,"width",e)},expression:"item.stemImg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRatio:t.item.stemImg.image.ratio}},[a("img",{attrs:{src:t.item.stemImg.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusData(t.item.stemImg,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","image","height",t.item.stemImg.image.ratio)}},model:{value:t.item.stemImg.image.height,callback:function(e){t.$set(t.item.stemImg.image,"height",e)},expression:"item.stemImg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2)],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","sprite")}},model:{value:t.item.stemImg.sprite.show,callback:function(e){t.$set(t.item.stemImg.sprite,"show",e)},expression:"item.stemImg.sprite.show"}},[t._v("精灵序列\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                精灵文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.sprite.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadSprite(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","x")}},model:{value:t.item.stemImg.sprite.x,callback:function(e){t.$set(t.item.stemImg.sprite,"x",e)},expression:"item.stemImg.sprite.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","y")}},model:{value:t.item.stemImg.sprite.y,callback:function(e){t.$set(t.item.stemImg.sprite,"y",e)},expression:"item.stemImg.sprite.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","sprite","scale")}},model:{value:t.item.stemImg.sprite.scale,callback:function(e){t.$set(t.item.stemImg.sprite,"scale",e)},expression:"item.stemImg.sprite.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.sprite.loop,callback:function(e){t.$set(t.item.stemImg.sprite,"loop",e)},expression:"item.stemImg.sprite.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"stemImg","animate")}},model:{value:t.item.stemImg.animate.show,callback:function(e){t.$set(t.item.stemImg.animate,"show",e)},expression:"item.stemImg.animate.show"}},[t._v("动画\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("动画文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.stemImg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"stemImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","x")}},model:{value:t.item.stemImg.animate.x,callback:function(e){t.$set(t.item.stemImg.animate,"x",e)},expression:"item.stemImg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","y")}},model:{value:t.item.stemImg.animate.y,callback:function(e){t.$set(t.item.stemImg.animate,"y",e)},expression:"item.stemImg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setElementStatus(t.index,"stemImg","animate","scale")}},model:{value:t.item.stemImg.animate.scale,callback:function(e){t.$set(t.item.stemImg.animate,"scale",e)},expression:"item.stemImg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.stemImg.animate.loop,callback:function(e){t.$set(t.item.stemImg.animate,"loop",e)},expression:"item.stemImg.animate.loop"}})],1)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource(t.index,"subTitle","audio")}},model:{value:t.item.subTitle.audioShow,callback:function(e){t.$set(t.item.subTitle,"audioShow",e)},expression:"item.subTitle.audioShow"}},[t._v("音频\n            ")])],1),t._v(" "),a("div",[a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("音频文件：")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio(t.index,e)}}})])])]),t._v(" "),a("div",{staticClass:"edit-range-audio"},[a("span",[t._v("音量：")]),t._v(" "),a("el-slider",{attrs:{min:Number(0),max:Number(1),step:Number(.1)},model:{value:t.item.subTitle.audio_volume,callback:function(e){t.$set(t.item.subTitle,"audio_volume",e)},expression:"item.subTitle.audio_volume"}})],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("图标动画")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.item.subTitle.soundImg.animate_name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(t.index,"soundImg",e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","x")}},model:{value:t.item.subTitle.soundImg.x,callback:function(e){t.$set(t.item.subTitle.soundImg,"x",e)},expression:"item.subTitle.soundImg.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("soundImg","y")}},model:{value:t.item.subTitle.soundImg.y,callback:function(e){t.$set(t.item.subTitle.soundImg,"y",e)},expression:"item.subTitle.soundImg.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setStemTextStatus(t.item.subTitle.stem.show)}},model:{value:t.item.subTitle.stem.show,callback:function(e){t.$set(t.item.subTitle.stem,"show",e)},expression:"item.subTitle.stem.show"}},[t._v("题干文字")])],1),t._v(" "),a("div",[a("div",{staticClass:"edit-textarea"},[a("span",[t._v("内容：")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.item.subTitle.stem.text,expression:"item.subTitle.stem.text"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入文字"},domProps:{value:t.item.subTitle.stem.text},on:{input:[function(e){e.target.composing||t.$set(t.item.subTitle.stem,"text",e.target.value)},function(e){return t.setStemText("text")}]}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setStemText("width")}},model:{value:t.item.subTitle.stem.width,callback:function(e){t.$set(t.item.subTitle.stem,"width",e)},expression:"item.subTitle.stem.width"}},[a("template",{slot:"prepend"},[t._v("段落宽度：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("fontFamily")}},model:{value:t.item.subTitle.stem.fontFamily,callback:function(e){t.$set(t.item.subTitle.stem,"fontFamily",e)},expression:"item.subTitle.stem.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("fontSize")}},model:{value:t.item.subTitle.stem.fontSize,callback:function(e){t.$set(t.item.subTitle.stem,"fontSize",e)},expression:"item.subTitle.stem.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("对齐：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},on:{change:function(e){return t.setStemText("textAlign")}},model:{value:t.item.subTitle.stem.textAlign,callback:function(e){t.$set(t.item.subTitle.stem,"textAlign",e)},expression:"item.subTitle.stem.textAlign"}},t._l(t.textAlign,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("letterSpacing")}},model:{value:t.item.subTitle.stem.letterSpacing,callback:function(e){t.$set(t.item.subTitle.stem,"letterSpacing",e)},expression:"item.subTitle.stem.letterSpacing"}},[a("template",{slot:"prepend"},[t._v("字间距：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",maxlength:"3",size:"mini"},nativeOn:{input:function(e){return t.setStemText("lineHeight")}},model:{value:t.item.subTitle.stem.lineHeight,callback:function(e){t.$set(t.item.subTitle.stem,"lineHeight",e)},expression:"item.subTitle.stem.lineHeight"}},[a("template",{slot:"prepend"},[t._v("行间距：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{on:{change:function(e){return t.setStemText("color")}},model:{value:t.item.subTitle.stem.color,callback:function(e){t.$set(t.item.subTitle.stem,"color",e)},expression:"item.subTitle.stem.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.item.subTitle.stem.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong",t.index)}}},[t._v("B\n            ")]),t._v(" "),a("span",{class:t.item.subTitle.stem.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic",t.index)}}},[t._v("I\n            ")])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","x")}},model:{value:t.item.subTitle.stem.x,callback:function(e){t.$set(t.item.subTitle.stem,"x",e)},expression:"item.subTitle.stem.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},nativeOn:{input:function(e){return t.setSubTitileAttr("stem","y")}},model:{value:t.item.subTitle.stem.y,callback:function(e){t.$set(t.item.subTitle.stem,"y",e)},expression:"item.subTitle.stem.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2)],1)])])},staticRenderFns:[]};var d=a("C7Lr")(m,c,!1,function(t){a("sEHa")},"data-v-2d7c1fd2",null).exports,g=a("HQUh"),h={name:"EditGamePrivate",data(){return{lockImg:this.resourceData.image_lock_on,unLockImg:this.resourceData.image_lock_off,checkbox:!1,radio:1,switchStatus:!1,audio_name:"",image:{show:!0,x:0,y:0,lock:!1,width:0,height:0,name:"",ratio:0},sprite:{show:!1,x:"500",y:"0",name:"",scale:"1",loop:!1},animate:{show:!1,x:"100",y:"100",name:"",scale:"3",loop:!0},testData:{switch:!0,animateName:"animateName",audioName:"audioName",spriteName:"spriteName",input:111,select:16,checked:!0,fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],fontSize:[{label:"16px",value:16},{label:"18px",value:18},{label:"20px",value:20},{label:"22px",value:22},{label:"24px",value:24},{label:"26px",value:26},{label:"30px",value:30},{label:"40px",value:40},{label:"50px",value:50}]}}},props:["allData","gameData","resourceData","item","index","tabShowStatus"],mounted(){},methods:{trashed(t,e,a){let i=stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("componentContainer"),n=i.getChildByName(e);a?(console.log("打开"),n&&(n.alpha=1)):(console.log("关闭"),n&&i.removeChild(n),this.gameData[t].content.option1.trash.image.name="",this.gameData[t].content.option1.trash.another.name="",this.gameData[t].content.option1.trash.image.width=0,this.gameData[t].content.option1.trash.image.height=0,this.gameData[t].content.option1.trash.image.x=0,this.gameData[t].content.option1.trash.image.y=0)},verifyNumber(t){let e=/^\d*\.+$/g;return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):e.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setDragArea(t,e,a,i,n,s,o){let r=null;if(r="image"==s?this.item.content[o][e][s]:this.item.content[o][e],"scale"===a)l=r[a],/^-?\d*\.\d+$/.test(l)&&(r[a]=parseFloat(r[a]).toFixed(1));else{if(("x"===a||"width"===a)&&r[a]>1920)return r[a]=r[a].substr(0,r[a].length-1),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&r[a]>1080)return r[a]=r[a].substr(0,r[a].length-1),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(r[a]=this.verifyNumber(r[a])),"width"===a&&r.lock&&i&&(r.height=(parseFloat(i)/n).toFixed(0)),"height"===a&&r.lock&&i&&(r.width=(parseFloat(i)*n).toFixed(0))}var l},lockStatusDrag(t,e){if(t.name){if(!t.width||!t.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.ratio=0,t.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.lock=!0,t.ratio=parseFloat(t.width)/parseFloat(t.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})},uploadImageDrag(t,e,a,i){let n=i.target.files[0].name.split(".")[i.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(n)?0!==i.target.files.length?this.$http.post("/uploadingImage",{image:i.target.files[0],render:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{"option"===e&&(this.gameData[this.index].content.option1.option[a].image.name=t.resourceName,this.gameData[this.index].content.option1.option[a].image.componentName=e+a,this.gameData[this.index].content.option1.option[a].image.width=t.width,this.gameData[this.index].content.option1.option[a].image.height=t.height,!this.gameData[this.index].content.option1.option[a].image.x&&(this.gameData[this.index].content.option1.option[a].image.x=0),!this.gameData[this.index].content.option1.option[a].image.y&&(this.gameData[this.index].content.option1.option[a].image.y=0),Object(g.UploadAndRenderEle)(this.index,e+a,t,this.allData)),"back"===e&&(this.gameData[this.index].content.option2.back.image.name=t.resourceName,this.gameData[this.index].content.option2.back.image.componentName=e,this.gameData[this.index].content.option2.back.image.width=t.width,this.gameData[this.index].content.option2.back.image.height=t.height,!this.gameData[this.index].content.option2.back.image.x&&(this.gameData[this.index].content.option2.back.image.x=0),!this.gameData[this.index].content.option2.back.image.y&&(this.gameData[this.index].content.option2.back.image.y=0),Object(g.UploadAndRenderEle)(this.index,e,t,this.allData)),"reset"===e&&(this.gameData[this.index].content.option2.reset.image.name=t.resourceName,this.gameData[this.index].content.option2.reset.image.componentName=e,this.gameData[this.index].content.option2.reset.image.width=t.width,this.gameData[this.index].content.option2.reset.image.height=t.height,!this.gameData[this.index].content.option2.reset.image.x&&(this.gameData[this.index].content.option2.reset.image.x=0),!this.gameData[this.index].content.option2.reset.image.y&&(this.gameData[this.index].content.option2.reset.image.y=0),Object(g.UploadAndRenderEle)(this.index,e,t,this.allData)),this.updateResourceData(),i.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},setDragOption(t,e,a,i,n,s,o){let r=stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("componentContainer").getChildByName(e),l=null;if(l=""!==o?this.item.content.option1.option[o][s]:this.item.content.option2[e][s],r)if("scale"===a)m=l[a],/^-?\d*\.\d+$/.test(m)&&(l[a]=parseFloat(l[a]).toFixed(1)),r[a].set(l[a]);else{if(("x"===a||"width"===a)&&l[a]>1920)return l[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&l[a]>1080)return l[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(l[a]=this.verifyNumber(l[a]),r[a]=l[a]),"width"===a&&l.lock&&i&&(l.height=(i/n).toFixed(0),r.height=l.height),"height"===a&&l.lock&&i&&(l.width=(i*n).toFixed(0),r.width=l.width)}var m},lockStatusDragOption(t,e){if(t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.lock=!0,t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})},changeOptionArr(t,e){if("add"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.option[e]));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(t),t.image.width=0,t.image.height=0,t.image.x=0,t.image.y=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option1.option.push(t)}else if("copy"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.option[e]));console.log(t),t.image.ratio=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option1.option.push(t),this.gameData[this.index].content.option1.option.forEach((t,e)=>{t.image.componentName="option"+e}),Object(g.RenderElementByIndex)(this.index,this.allData)}else"del"===t&&this.gameData[this.index].content.option1.option.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.gameData[this.index].content.option1.option.splice(e,1),this.gameData[this.index].content.option1.option.forEach((t,e)=>{t.image.componentName="option"+e}),Object(g.RenderElementByIndex)(this.index,this.allData),this.$message({type:"success",message:"删除成功!"})}).catch(t=>{this.$message({type:"info",message:"已取消"})})},setDragTrash(t,e,a,i,n,s,o){let r=stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("componentContainer").getChildByName(e),l=this.item.content.option1.trash[s];if(r)if("scale"===a)m=l[a],/^-?\d*\.\d+$/.test(m)&&(l[a]=parseFloat(l[a]).toFixed(1)),r[a].set(l[a]);else{if(("x"===a||"width"===a)&&l[a]>1920)return l[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&l[a]>1080)return l[a]=parseFloat(r[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(l[a]=this.verifyNumber(l[a]),r[a]=l[a]),"width"===a&&l.lock&&i&&(l.height=(i/n).toFixed(0),r.height=l.height),"height"===a&&l.lock&&i&&(l.width=(i*n).toFixed(0),r.width=l.width)}var m},uploadImageTrash(t,e,a){let i=a.target.files[0].name.split(".")[a.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(i)?0!==a.target.files.length?this.$http.post("/uploadingImage",{image:a.target.files[0],render:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{"trash"===e&&(this.gameData[this.index].content.option1.trash.image.name=t.resourceName,this.gameData[this.index].content.option1.trash.image.componentName=e,this.gameData[this.index].content.option1.trash.image.width=t.width,this.gameData[this.index].content.option1.trash.image.height=t.height,Object(g.UploadAndRenderEle)(this.index,e,t,this.allData)),"brash"===e&&(this.gameData[this.index].content.option2.brash.image.name=t.resourceName,this.gameData[this.index].content.option2.brash.image.width=t.width,this.gameData[this.index].content.option2.brash.image.height=t.height),this.updateResourceData(),a.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},setGoldTextFontStyle(t,e,a,i){this.gameData[e].content[a][i][t]=!this.gameData[e].content[a][i][t]},uploadBlankImage(t,e,a,i){let n=i.target.files[0].name.split(".")[i.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(n)?0!==i.target.files.length?this.$http.post("/uploadingImage",{image:i.target.files[0],render:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{"blank_drag"===e&&(this.gameData[this.index].content.option1.blank_drag[a].image.name=t.resourceName,this.gameData[this.index].content.option1.blank_drag[a].image.componentName=e+a,this.gameData[this.index].content.option1.blank_drag[a].image.width=t.width,this.gameData[this.index].content.option1.blank_drag[a].image.height=t.height,Object(g.UploadAndRenderEle)(this.index,e+a,t,this.allData)),"blanked"===e&&(console.log(this.gameData[this.index].content.option2.blank[a].image.x),this.gameData[this.index].content.option2.blank[a].image.name=t.resourceName,this.gameData[this.index].content.option2.blank[a].image.componentName=e+a,this.gameData[this.index].content.option2.blank[a].image.width=t.width,this.gameData[this.index].content.option2.blank[a].image.height=t.height,Object(g.UploadAndRenderEle)(this.index,e+a,t,this.allData)),this.updateResourceData(),i.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},uploadChangeImage(t,e,a,i){0!==i.target.files.length?this.$http.post("/uploadingImage",{image:i.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{"blank_drag_unable"===e&&(this.gameData[this.index].content.option1.blank_drag[a].image.name_another.name=t.resourceName),"blank_unable"===e&&(console.log("上传。。。。。"),this.gameData[this.index].content.option2.blank[a].image.name_another.name=t.resourceName),"trash_unable"===e&&(this.gameData[this.index].content.option1.trash.image.name_another.name=t.resourceName),"brash"===e&&(this.gameData[this.index].content.option2.brash.image.name=t.resourceName,this.gameData[this.index].content.option2.brash.image.width=t.width,this.gameData[this.index].content.option2.brash.image.height=t.height),this.updateResourceData()}):this.$message({message:"上传文件个数不符合",type:"warning"})},setBlankStatus(t,e,a,i,n,s,o,r){let l=stage.getChildByName("GAME").getChildByName("GAME"+this.index).getChildByName("componentContainer").getChildByName(e),m=null;if(m="option1"==r?this.item.content.option1.blank_drag[o][s]:this.item.content.option2.blank[o][s],l)if("scale"===a)c=m[a],/^-?\d*\.\d+$/.test(c)&&(m[a]=parseFloat(m[a]).toFixed(1)),l[a].set(m[a]);else{if(("x"===a||"width"===a)&&m[a]>1920)return m[a]=parseFloat(l[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===a||"height"===a)&&m[a]>1080)return m[a]=parseFloat(l[a]).toFixed(0),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(m[a]=this.verifyNumber(m[a]),l[a]=m[a]),"width"===a&&(console.log(m),m.lock&&i&&(m.height=(i/n).toFixed(0),l.height=m.height)),"height"===a&&m.lock&&i&&(m.width=(i*n).toFixed(0),l.width=m.width)}var c},changeBlankArr(t,e){if("add"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.blank_drag[e]));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(t),t.image.width=0,t.image.height=0,t.image.x=0,t.image.y=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option1.blank_drag.push(t)}else if("copy"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.blank_drag[e]));console.log(t),t.image.ratio=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option1.blank_drag.push(t),this.gameData[this.index].content.option1.blank_drag.forEach((t,e)=>{t.image.componentName="blank_drag"+e}),Object(g.RenderElementByIndex)(this.index,this.allData)}else"del"===t&&this.gameData[this.index].content.option1.blank_drag.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.gameData[this.index].content.option1.blank_drag.splice(e,1),this.gameData[this.index].content.option1.blank_drag.forEach((t,e)=>{t.image.componentName="blank_drag"+e}),Object(g.RenderElementByIndex)(this.index,this.allData),this.$message({type:"success",message:"删除成功!"})}).catch(t=>{this.$message({type:"info",message:"已取消"})})},changeRightArr(t,e,a){if("add"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.blank_drag[e].image.keys[a]));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(t),this.gameData[this.index].content.option1.blank_drag[e].image.keys.push(t),console.log("添加....",this.gameData[this.index].content.option1.blank_drag[e].image.keys)}else"copy"===t?this.gameData[this.index].content.option1.blank_drag[e].image.keys.push(JSON.parse(JSON.stringify(this.gameData[this.index].content.option1.blank_drag[e].image.keys[a]))):"del"===t&&this.gameData[this.index].content.option1.blank_drag[e].image.keys.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.gameData[this.index].content.option1.blank_drag[e].image.keys.splice(a,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消"})})},changeRightArrAnother(t,e,a){if("add"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option2.blank[e].image.keys[a]));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(t),this.gameData[this.index].content.option2.blank[e].image.keys.push(t)}else"copy"===t?this.gameData[this.index].content.option2.blank[e].image.keys.push(JSON.parse(JSON.stringify(this.gameData[this.index].content.option2.blank[e].image.keys[a]))):"del"===t&&this.gameData[this.index].content.option2.blank[e].image.keys.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.gameData[this.index].content.option2.blank[e].image.keys.splice(a,1),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消"})})},changeBlankArrAnother(t,e){if("add"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option2.blank[e]));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(t),t.image.width=0,t.image.height=0,t.image.x=0,t.image.y=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option2.blank.push(t)}else if("copy"===t){let t=JSON.parse(JSON.stringify(this.gameData[this.index].content.option2.blank[e]));console.log(t),t.image.ratio=0,t.image.lockImg="image_lock_off",t.image.lock=!1,this.gameData[this.index].content.option2.blank.push(t),this.gameData[this.index].content.option2.blank.forEach((t,e)=>{t.image.componentName="blanked"+e}),Object(g.RenderElementByIndex)(this.index,this.allData)}else"del"===t&&this.gameData[this.index].content.option2.blank.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.gameData[this.index].content.option2.blank.splice(e,1),this.gameData[this.index].content.option2.blank.forEach((t,e)=>{t.image.componentName="blanked"+e}),console.log("dddd",this.gameData[this.index].content.option2.blank),Object(g.RenderElementByIndex)(this.index,this.allData),this.$message({type:"success",message:"删除成功!"})}).catch(t=>{this.$message({type:"info",message:"已取消"})})},setImageLock(){this.image.lock=!this.image.lock,this.image.height&&this.image.width?this.image.lock&&(this.image.ratio=this.image.width/this.image.height):this.$message({message:"X或Y为0或为空 无法计算比例",type:"warning"})},setAttr(t,e){this.image.ratio>0&&("width"===e||"height"===e)&&this.image.lock&&("width"===e?(console.log(this.image.width,this.image.ratio),this.image.height=this.image.width/this.image.ratio):"height"===e&&(this.image.width=this.image.height*this.image.ratio))},tabShow(t,e){let a=this.$refs[e+"Title"];this.tabShowStatus[t].child[e]?(this.tabShowStatus[t].child[e]=!1,a.className="el-icon-arrow-right"):(this.tabShowStatus[t].child[e]=!0,a.className="el-icon-arrow-down")},verifyAnimationFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json","atlas"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},verifySpriteFiles(t){let e=[],a=Object.values(t).map((t,e)=>t.name).map(t=>(e.push(t.split(".")[1]),t.split(".")[0])),i=e.sort((t,e)=>t.length-e.length).toString(),n=["png","json"].toString(),s=a[0];return a.every((t,e)=>s===t)&&i===n},uploadAnimation(t,e){if(0===e.target.files.length||3!==e.target.files.length)return void this.$message({message:"上传文件个数不符合",type:"warning"});if(!this.verifyAnimationFiles(e.target.files))return void this.$message({message:"上传文件不符合",type:"warning"});let a={};Object.values(e.target.files).forEach((t,e)=>{a["animation"+(e+1)]=t}),this.$http.post("/uploadingAnimation",a,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.animate.name=t.resourceName,e.target.value=""})},uploadSprite(t,e){if(0===e.target.files.length||2!==e.target.files.length)return void this.$message({message:"上传文件个数不符合",type:"warning"});if(!this.verifySpriteFiles(e.target.files))return void this.$message({message:"上传文件不符合",type:"warning"});let a={};Object.values(e.target.files).forEach((t,e)=>{a["sprite"+(e+1)]=t}),console.log(a),this.$http.post("/uploadingSprite",a,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.sprite.name=t.resourceName,e.target.value=""})},uploadAudio(t,e){let a=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(a)?0!==e.target.files.length?this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{this.audio_name=t.resourceName,e.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},updateResourceData(){this.$emit("updateResourceData")}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["1"==t.allData.dragShow?a("div",{ref:"drag",staticClass:"drag"},[a("div",{staticClass:"game-title"},[a("i",{ref:"option1Title",class:t.tabShowStatus[t.index].child.option1?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option1")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option1")}}},[t._v("\n                拖拽\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option1,expression:"tabShowStatus[index].child.option1"}],staticClass:"game-inner"},[a("div",{staticClass:"game-title"},[a("i",{ref:"option2Title",class:t.tabShowStatus[t.index].child.option2?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option2")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option2")}}},[t._v("\n                    拖拽区\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option2,expression:"tabShowStatus[index].child.option2"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","width",e,t.gameData[t.index].content.option1.dragArea.ratio,"","option1")}},model:{value:t.gameData[t.index].content.option1.dragArea.width,callback:function(e){t.$set(t.gameData[t.index].content.option1.dragArea,"width",e)},expression:"gameData[index].content.option1.dragArea.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.gameData[t.index].content.option1.dragArea.ratio}},[a("img",{attrs:{src:t.item.content.option1.dragArea.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDrag(t.gameData[t.index].content.option1.dragArea,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","height",e,t.gameData[t.index].content.option1.dragArea.ratio,"","option1")}},model:{value:t.gameData[t.index].content.option1.dragArea.height,callback:function(e){t.$set(t.gameData[t.index].content.option1.dragArea,"height",e)},expression:"gameData[index].content.option1.dragArea.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","x",e,t.gameData[t.index].content.option1.dragArea.ratio,"","option1")}},model:{value:t.gameData[t.index].content.option1.dragArea.x,callback:function(e){t.$set(t.gameData[t.index].content.option1.dragArea,"x",e)},expression:"gameData[index].content.option1.dragArea.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","y",e,t.gameData[t.index].content.option1.dragArea.ratio,"","option1")}},model:{value:t.gameData[t.index].content.option1.dragArea.y,callback:function(e){t.$set(t.gameData[t.index].content.option1.dragArea,"y",e)},expression:"gameData[index].content.option1.dragArea.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option3Title",class:t.tabShowStatus[t.index].child.option3?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option3")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option3")}}},[t._v("\n                    拖拽物\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option3,expression:"tabShowStatus[index].child.option3"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[a("span",[t._v("是否重复拖拽")]),t._v(" "),a("div",{staticClass:"edit-switch",staticStyle:{float:"right","margin-top":"-5px"}},[a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.item.content.option1.dragRepeat,callback:function(e){t.$set(t.item.content.option1,"dragRepeat",e)},expression:"item.content.option1.dragRepeat"}})],1)])]),t._v(" "),a("div",{staticClass:"optionItem"},[t._l(t.gameData[t.index].content.option1.option,function(e,i){return a("div",{key:i},[a("div",{staticClass:"dragTitle title"},[a("span",{staticStyle:{color:"#fff","margin-top":"20px"}},[t._v("拖拽物 "+t._s(i+1))]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeOptionArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeOptionArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeOptionArr("add",i)}}})]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImageDrag(t.index,"option",i,e)}}})])])]),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(a){return t.setDragOption(t.index,"option"+i,"width",a,e.image.ratio,"image",i)}},model:{value:e.image.width,callback:function(a){t.$set(e.image,"width",a)},expression:"option1.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:e.image.ratio}},[a("img",{attrs:{src:e.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(a){return t.lockStatusDragOption(e,a)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(a){return t.setDragOption(t.index,"option"+i,"height",a,e.image.ratio,"image",i)}},model:{value:e.image.height,callback:function(a){t.$set(e.image,"height",a)},expression:"option1.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(a){return t.setDragOption(t.index,"option"+i,"x",a,e.image.ratio,"image",i)}},model:{value:e.image.x,callback:function(a){t.$set(e.image,"x",a)},expression:"option1.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(a){return t.setDragOption(t.index,"option"+i,"y",a,e.image.ratio,"image",i)}},model:{value:e.image.y,callback:function(a){t.$set(e.image,"y",a)},expression:"option1.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2)],1)])}),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],2)]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option4Title",class:t.tabShowStatus[t.index].child.option4?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option4")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option4")}}},[t._v("\n                    垃圾桶\n                ")]),t._v(" "),a("el-switch",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{input:function(e){return t.trashed(t.index,"trash",e)}},model:{value:t.item.content.option1.trash.show,callback:function(e){t.$set(t.item.content.option1.trash,"show",e)},expression:"item.content.option1.trash.show"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option4,expression:"tabShowStatus[index].child.option4"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[t._m(0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.gameData[t.index].content.option1.trash.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImageTrash(t.index,"trash",e)}}})])])])]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[t._m(1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.gameData[t.index].content.option1.trash.image.name_another.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadChangeImage(t.index,"trash_unable",0,e)}}})])])])]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragTrash(t.index,"trash","width",e,t.item.content.option1.trash.image.ratio,"image","")}},model:{value:t.item.content.option1.trash.image.width,callback:function(e){t.$set(t.item.content.option1.trash.image,"width",e)},expression:"item.content.option1.trash.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.item.content.option1.trash.image.ratio}},[a("img",{attrs:{src:t.item.content.option1.trash.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.item.content.option1.trash,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragTrash(t.index,"trash","height",e,t.item.content.option1.trash.image.ratio,"image","")}},model:{value:t.item.content.option1.trash.image.height,callback:function(e){t.$set(t.item.content.option1.trash.image,"height",e)},expression:"item.content.option1.trash.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragTrash(t.index,"trash","x",e,t.item.content.option1.trash.image.ratio,"image","")}},model:{value:t.item.content.option1.trash.image.x,callback:function(e){t.$set(t.item.content.option1.trash.image,"x",e)},expression:"item.content.option1.trash.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragTrash(t.index,"trash","y",e,t.item.content.option1.trash.image.ratio,"image","")}},model:{value:t.item.content.option1.trash.image.y,callback:function(e){t.$set(t.item.content.option1.trash.image,"y",e)},expression:"item.content.option1.trash.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],1)])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option5Title",class:t.tabShowStatus[t.index].child.option5?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option5")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option5")}}},[t._v("\n                输入样式\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option5,expression:"tabShowStatus[index].child.option5"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-select",staticStyle:{width:"100%"}},[a("span",{staticStyle:{width:"55px"}},[t._v("字体 :")]),t._v(" "),a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",size:"mini"},model:{value:t.item.content.option1.style_drag.fontFamily,callback:function(e){t.$set(t.item.content.option1.style_drag,"fontFamily",e)},expression:"item.content.option1.style_drag.fontFamily"}},t._l(t.testData.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.item.content.option1.style_drag.fontSize,callback:function(e){t.$set(t.item.content.option1.style_drag,"fontSize",e)},expression:"item.content.option1.style_drag.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号 :")])],2)],1),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.item.content.option1.style_drag.length,callback:function(e){t.$set(t.item.content.option1.style_drag,"length",e)},expression:"item.content.option1.style_drag.length"}},[a("template",{slot:"prepend"},[t._v("字符长度:")])],2)],1),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.item.content.option1.style_drag.color,callback:function(e){t.$set(t.item.content.option1.style_drag,"color",e)},expression:"item.content.option1.style_drag.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.item.content.option1.style_drag.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong",t.index,"option1","style_drag")}}},[t._v("B\n                ")]),t._v(" "),a("span",{class:t.item.content.option1.style_drag.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic",t.index,"option1","style_drag")}}},[t._v("I\n                ")])]),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option6Title",class:t.tabShowStatus[t.index].child.option6?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option6")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option6")}}},[t._v("\n                填空\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option6,expression:"tabShowStatus[index].child.option6"}],staticClass:"game-inner"},[a("div",{staticClass:"optionItem"},t._l(t.gameData[t.index].content.option1.blank_drag,function(e,i){return a("div",{key:i},[a("div",{staticClass:"dragTitle title"},[a("span",{staticStyle:{color:"#fff","margin-top":"20px"}},[t._v("填空 "+t._s(i+1))]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArr("add",i)}}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._m(2,!0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadBlankImage(t.index,"blank_drag",i,e)}}})])])]),t._v(" "),t._m(3,!0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.image.name_another.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadChangeImage(t.index,"blank_drag_unable",i,e)}}})])])]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blank_drag"+i,"width",a,e.image.ratio,"image",i,"option1")}},model:{value:e.image.width,callback:function(a){t.$set(e.image,"width",a)},expression:"blank2.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:e.image.ratio}},[a("img",{attrs:{src:e.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(a){return t.lockStatusDragOption(e,a)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blank_drag"+i,"height",a,e.image.ratio,"image",i,"option1")}},model:{value:e.image.height,callback:function(a){t.$set(e.image,"height",a)},expression:"blank2.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blank_drag"+i,"x",a,e.image.ratio,"image",i,"option1")}},model:{value:e.image.x,callback:function(a){t.$set(e.image,"x",a)},expression:"blank2.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blank_drag"+i,"y",a,e.image.ratio,"image",i,"option1")}},model:{value:e.image.y,callback:function(a){t.$set(e.image,"y",a)},expression:"blank2.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},t._l(e.image.keys,function(e,n){return a("div",{key:n},[0===n?a("div",{staticClass:"option-animate-title"},[a("span",[t._v("正确答案")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",staticStyle:{"margin-top":"-1px"},on:{click:function(e){return t.changeRightArr("add",i,n)}}})]):t._e(),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"rightAnswer.value"}},[a("template",{slot:"prepend"},[a("span",[t._v("正确答案:"+t._s(n+1))])])],2),t._v(" "),a("div",{staticStyle:{float:"right",color:"#fff","margin-top":"12px"}},[a("i",{staticClass:"game-title-icon el-icon-delete",staticStyle:{margin:"6px 4px"},on:{click:function(e){return t.changeRightArr("del",i,n)}}})])],1)])}),0)])}),0)])]):t._e(),t._v(" "),"2"==t.allData.dragShow?a("div",{ref:"draw",staticClass:"draw"},[a("div",{staticClass:"game-title"},[a("i",{ref:"option1Title",class:t.tabShowStatus[t.index].child.option1?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option1")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option1")}}},[t._v("\n                画笔\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option1,expression:"tabShowStatus[index].child.option1"}],staticClass:"game-inner"},[a("div",{staticClass:"game-title"},[a("i",{ref:"option2Title",class:t.tabShowStatus[t.index].child.option2?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option2")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option2")}}},[t._v("\n                    画线区域\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option2,expression:"tabShowStatus[index].child.option2"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","width",e,t.gameData[t.index].content.option2.dragArea.ratio,"","option2")}},model:{value:t.gameData[t.index].content.option2.dragArea.width,callback:function(e){t.$set(t.gameData[t.index].content.option2.dragArea,"width",e)},expression:"gameData[index].content.option2.dragArea.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.gameData[t.index].content.option2.dragArea.ratio}},[a("img",{attrs:{src:t.item.content.option2.dragArea.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDrag(t.gameData[t.index].content.option2.dragArea,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","height",e,t.gameData[t.index].content.option2.dragArea.ratio,"","option2")}},model:{value:t.gameData[t.index].content.option2.dragArea.height,callback:function(e){t.$set(t.gameData[t.index].content.option2.dragArea,"height",e)},expression:"gameData[index].content.option2.dragArea.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","x",e,t.gameData[t.index].content.option2.dragArea.ratio,"","option2")}},model:{value:t.gameData[t.index].content.option2.dragArea.x,callback:function(e){t.$set(t.gameData[t.index].content.option2.dragArea,"x",e)},expression:"gameData[index].content.option2.dragArea.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"dragArea","y",e,t.gameData[t.index].content.option2.dragArea.ratio,"","option2")}},model:{value:t.gameData[t.index].content.option2.dragArea.y,callback:function(e){t.$set(t.gameData[t.index].content.option2.dragArea,"y",e)},expression:"gameData[index].content.option2.dragArea.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],1),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option3Title",class:t.tabShowStatus[t.index].child.option3?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option3")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option3")}}},[t._v("\n                    画笔属性\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option3,expression:"tabShowStatus[index].child.option3"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate",staticStyle:{"padding-left":"15px","border-bottom":"none"}},[a("div",{staticClass:"edit-radio-title"},[a("el-radio-group",{model:{value:t.item.content.option2.brashChoice.choice,callback:function(e){t.$set(t.item.content.option2.brashChoice,"choice",e)},expression:"item.content.option2.brashChoice.choice"}},[a("el-radio",{attrs:{label:"1"}},[t._v("自由画笔")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("直线画笔")])],1)],1)]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[t._m(4),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.content.option2.brash.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadChangeImage(t.index,"brash",0,e)}}})])])]),t._v(" "),a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"brash","width",e,t.gameData[t.index].content.option2.brash.image.ratio,"image","option2")}},model:{value:t.item.content.option2.brash.image.width,callback:function(e){t.$set(t.item.content.option2.brash.image,"width",e)},expression:"item.content.option2.brash.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.item.content.option2.brash.image.ratio}},[a("img",{attrs:{src:t.item.content.option2.brash.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.gameData[t.index].content.option2.brash,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragArea(t.index,"brash","height",e,t.gameData[t.index].content.option2.brash.image.ratio,"image","option2")}},model:{value:t.item.content.option2.brash.image.height,callback:function(e){t.$set(t.item.content.option2.brash.image,"height",e)},expression:"item.content.option2.brash.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.item.content.option2.brash.degree,callback:function(e){t.$set(t.item.content.option2.brash,"degree",e)},expression:"item.content.option2.brash.degree"}},[a("template",{slot:"prepend"},[t._v("画线粗细:")])],2),t._v(" "),a("div",{staticClass:"edit-select",staticStyle:{width:"66%"}},[a("span",[t._v("画线颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.item.content.option2.brash.color,callback:function(e){t.$set(t.item.content.option2.brash,"color",e)},expression:"item.content.option2.brash.color"}})],1)],1)]),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option4Title",class:t.tabShowStatus[t.index].child.option4?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option4")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option4")}}},[t._v("\n                    按钮\n                ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option4,expression:"tabShowStatus[index].child.option4"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[t._m(5),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.content.option2.back.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImageDrag(t.index,"back","",e)}}})])])]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"back","width",e,t.item.content.option2.back.image.ratio,"image","")}},model:{value:t.item.content.option2.back.image.width,callback:function(e){t.$set(t.item.content.option2.back.image,"width",e)},expression:"item.content.option2.back.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.item.content.option2.back.image.ratio}},[a("img",{attrs:{src:t.item.content.option2.back.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.item.content.option2.back,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"back","height",e,t.item.content.option2.back.image.ratio,"image","")}},model:{value:t.item.content.option2.back.image.height,callback:function(e){t.$set(t.item.content.option2.back.image,"height",e)},expression:"item.content.option2.back.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"back","x",e,t.item.content.option2.back.image.ratio,"image","")}},model:{value:t.item.content.option2.back.image.x,callback:function(e){t.$set(t.item.content.option2.back.image,"x",e)},expression:"item.content.option2.back.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"back","y",e,t.item.content.option2.back.image.ratio,"image","")}},model:{value:t.item.content.option2.back.image.y,callback:function(e){t.$set(t.item.content.option2.back.image,"y",e)},expression:"item.content.option2.back.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2)],1)]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[t._m(6),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.item.content.option2.reset.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImageDrag(t.index,"reset","",e)}}})])])]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"reset","width",e,t.item.content.option2.reset.image.ratio,"image","")}},model:{value:t.item.content.option2.reset.image.width,callback:function(e){t.$set(t.item.content.option2.reset.image,"width",e)},expression:"item.content.option2.reset.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.item.content.option2.reset.image.ratio}},[a("img",{attrs:{src:t.item.content.option2.reset.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.item.content.option2.reset,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"reset","height",e,t.item.content.option2.reset.image.ratio,"image","")}},model:{value:t.item.content.option2.reset.image.height,callback:function(e){t.$set(t.item.content.option2.reset.image,"height",e)},expression:"item.content.option2.reset.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"reset","x",e,t.item.content.option2.reset.image.ratio,"image","")}},model:{value:t.item.content.option2.reset.image.x,callback:function(e){t.$set(t.item.content.option2.reset.image,"x",e)},expression:"item.content.option2.reset.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragOption(t.index,"reset","y",e,t.item.content.option2.reset.image.ratio,"image","")}},model:{value:t.item.content.option2.reset.image.y,callback:function(e){t.$set(t.item.content.option2.reset.image,"y",e)},expression:"item.content.option2.reset.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2)],1)])])]),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option5Title",class:t.tabShowStatus[t.index].child.option5?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option5")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option5")}}},[t._v("\n                输入样式\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option5,expression:"tabShowStatus[index].child.option5"}],staticClass:"game-inner"},[a("div",{staticClass:"edit-select",staticStyle:{width:"100%"}},[a("span",{staticStyle:{width:"55px"}},[t._v("字体 :")]),t._v(" "),a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",size:"mini"},model:{value:t.item.content.option2.style.fontFamily,callback:function(e){t.$set(t.item.content.option2.style,"fontFamily",e)},expression:"item.content.option2.style.fontFamily"}},t._l(t.testData.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.item.content.option2.style.fontSize,callback:function(e){t.$set(t.item.content.option2.style,"fontSize",e)},expression:"item.content.option2.style.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号 :")])],2)],1),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.item.content.option2.style.length,callback:function(e){t.$set(t.item.content.option2.style,"length",e)},expression:"item.content.option2.style.length"}},[a("template",{slot:"prepend"},[t._v("字符长度:")])],2)],1),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.item.content.option2.style.color,callback:function(e){t.$set(t.item.content.option2.style,"color",e)},expression:"item.content.option2.style.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.item.content.option2.style.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong",t.index,"option2","style")}}},[t._v("B\n                ")]),t._v(" "),a("span",{class:t.item.content.option2.style.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic",t.index,"option2","style")}}},[t._v("I\n                ")])]),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option6Title",class:t.tabShowStatus[t.index].child.option6?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(t.index,"option6")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(t.index,"option6")}}},[t._v("\n                填空\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[t.index].child.option6,expression:"tabShowStatus[index].child.option6"}],staticClass:"game-inner"},[a("div",{staticClass:"optionItem"},t._l(t.gameData[t.index].content.option2.blank,function(e,i){return a("div",{key:i},[a("div",{staticClass:"dragTitle title"},[a("span",{staticStyle:{color:"#fff","margin-top":"20px"}},[t._v("填空 "+t._s(i+1))]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArrAnother("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArrAnother("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",staticStyle:{color:"#fff"},on:{click:function(e){return t.changeBlankArrAnother("add",i)}}})]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._m(7,!0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadBlankImage(t.index,"blanked",i,e)}}})])])]),t._v(" "),t._m(8,!0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[e.image.name_another.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadChangeImage(t.index,"blank_unable",i,e)}}})])])]),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blanked"+i,"width",a,e.image.ratio,"image",i,"option2")}},model:{value:e.image.width,callback:function(a){t.$set(e.image,"width",a)},expression:"blank2.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:e.image.ratio}},[a("img",{attrs:{src:e.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(a){return t.lockStatusDragOption(e,a)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blanked"+i,"height",a,e.image.ratio,"image",i,"option2")}},model:{value:e.image.height,callback:function(a){t.$set(e.image,"height",a)},expression:"blank2.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blanked"+i,"x",a,e.image.ratio,"image",i,"option2")}},model:{value:e.image.x,callback:function(a){t.$set(e.image,"x",a)},expression:"blank2.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(a){return t.setBlankStatus(t.index,"blanked"+i,"y",a,e.image.ratio,"image",i,"option2")}},model:{value:e.image.y,callback:function(a){t.$set(e.image,"y",a)},expression:"blank2.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2)],1),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},t._l(e.image.keys,function(e,n){return a("div",{key:n},[0==n?a("div",{staticClass:"option-animate-title"},[a("span",[t._v("正确答案")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",staticStyle:{"margin-top":"-1px"},on:{click:function(e){return t.changeRightArrAnother("add",i,n)}}})]):t._e(),t._v(" "),a("div",{staticStyle:{width:"100%",float:"left"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入内容",size:"mini"},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"rightAnswer.value"}},[a("template",{slot:"prepend"},[a("span",[t._v("正确答案:"+t._s(n+1))])])],2),t._v(" "),a("div",{staticStyle:{float:"right",color:"#fff","margin-top":"12px"}},[a("i",{staticClass:"game-title-icon el-icon-delete",staticStyle:{margin:"6px 4px"},on:{click:function(e){return t.changeRightArrAnother("del",i,n)}}})])],1)])}),0)])}),0)])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("默认状态：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("触碰状态：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title",staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{color:"#fff"}},[this._v("默认状态：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title",staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{color:"#fff"}},[this._v("选中状态：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("画笔（左上角为笔头）")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("撤销按钮：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("重置按钮：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title",staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{color:"#fff"}},[this._v("默认状态：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title",staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{color:"#fff"}},[this._v("选中状态：")])])}]};var u=a("C7Lr")(h,p,!1,function(t){a("SpE3")},"data-v-4fa6712a",null).exports,v={name:"EditGameBefore",props:["allData","resourceData"],data:()=>({}),computed:{},methods:{change(t){console.log(t);let e=this;this.allData.sources.forEach((a,i)=>{"1"==t?(a.content.option2.back.image.name="",a.content.option2.back.image.componentName="",a.content.option2.back.image.x=0,a.content.option2.back.image.y=0,a.content.option2.back.image.width=0,a.content.option2.back.image.height=0,a.content.option2.blank.forEach((t,e)=>{a.content.option2.blank[e].image.name="",a.content.option2.blank[e].image.componentName="",a.content.option2.blank[e].image.x=0,a.content.option2.blank[e].image.y=0,a.content.option2.blank[e].image.width=0,a.content.option2.blank[e].image.height=0,a.content.option2.blank[e].image.name_another.name=""}),a.content.option2.brash.image.name="",a.content.option2.brash.image.width=0,a.content.option2.brash.image.height=0,a.content.option2.reset.image.name="",a.content.option2.reset.image.componentName="",a.content.option2.reset.image.x=0,a.content.option2.reset.image.y=0,a.content.option2.reset.image.width=0,a.content.option2.reset.image.height=0):(a.content.option1.trash.image.name="",a.content.option1.trash.image.name_another.name="",a.content.option1.trash.image.width=0,a.content.option1.trash.image.height=0,a.content.option1.trash.image.x=0,a.content.option1.trash.image.y=0,a.content.option1.blank_drag.forEach((t,e)=>{a.content.option1.blank_drag[e].image.name="",a.content.option1.blank_drag[e].image.name_another.name="",a.content.option1.blank_drag[e].image.width=0,a.content.option1.blank_drag[e].image.height=0,a.content.option1.blank_drag[e].image.x=0,a.content.option1.blank_drag[e].image.y=0}),a.content.option1.option.forEach((t,e)=>{a.content.option1.option[e].image.name="",a.content.option1.option[e].image.width=0,a.content.option1.option[e].image.height=0,a.content.option1.option[e].image.x=0,a.content.option1.option[e].image.y=0})),Object(g.RenderElementByIndex)(i,e.allData)})},updateResourceData(){this.$emit("updateResourceData")}},mounted(){}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticStyle:{color:"#fff","padding-left":"15px","margin-bottom":"0px"}},[t._v("操作区类别选择")]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"padding-left":"15px","border-bottom":"none"}},[a("div",{staticClass:"edit-radio-title"},[a("el-radio-group",{on:{input:function(e){return t.change(e)}},model:{value:t.allData.dragShow,callback:function(e){t.$set(t.allData,"dragShow",e)},expression:"allData.dragShow"}},[a("el-radio",{attrs:{label:"1"}},[t._v("拖拽")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("画笔")])],1)],1)])])},staticRenderFns:[]};var f=a("C7Lr")(v,b,!1,function(t){a("Vd/m")},"data-v-b70629a0",null).exports,x={name:"EditGameAfter",props:["allData","resourceData"],data(){return{lockImg:this.resourceData.image_lock_on,unLockImg:this.resourceData.image_lock_off,tabShowStatus:{option1:!1,option2:!1,option3:!1,option4:!1},radio:1,switchStatus:!1,image:{show:!0,x:0,y:0,lock:!1,width:0,height:0,name:"",ratio:0},audio_name:"dsadfs",temData:null,temResourceData:null}},created(){this.temData=this.allData,this.temResourceData=this.resourceData},methods:{showInput(t){t||(this.temData.comentAudio.pickBlank.audio="")},showKeys(t){t||(this.temData.comentAudio.keyBlank.audio="")},updateResourceData(){this.$emit("updateResourceData")},tabShow(t){let e=this.$refs[t+"Title"];this.tabShowStatus[t]?(this.tabShowStatus[t]=!1,e.className="el-icon-arrow-right"):(this.tabShowStatus[t]=!0,e.className="el-icon-arrow-down")},uploadImage(t,e){let a=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(a)?0!==e.target.files.length?this.$http.post("/uploadingImage",{image:e.target.files[0],render:!0},{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{"prevBtn"===t&&(this.temData.commentBtn.prevBtn.image.name=a.resourceName,this.temData.commentBtn.prevBtn.image.width=a.width,this.temData.commentBtn.prevBtn.image.height=a.height,!this.temData.commentBtn.prevBtn.image.x&&(this.temData.commentBtn.prevBtn.image.x=0),!this.temData.commentBtn.prevBtn.image.y&&(this.temData.commentBtn.prevBtn.image.y=0)),"nextBtn"===t&&(this.temData.commentBtn.nextBtn.image.name=a.resourceName,this.temData.commentBtn.nextBtn.image.width=a.width,this.temData.commentBtn.nextBtn.image.height=a.height,!this.temData.commentBtn.nextBtn.image.x&&(this.temData.commentBtn.nextBtn.image.x=0),!this.temData.commentBtn.nextBtn.image.y&&(this.temData.commentBtn.nextBtn.image.y=0)),"submit"===t&&(this.temData.commentBtn.subBtn.image.name=a.resourceName,this.temData.commentBtn.nextBtn.image.width=a.width,this.temData.commentBtn.nextBtn.image.height=a.height,!this.temData.commentBtn.nextBtn.image.x&&(this.temData.commentBtn.nextBtn.image.x=0),!this.temData.commentBtn.nextBtn.image.y&&(this.temData.commentBtn.nextBtn.image.y=0)),this.updateResourceData(),e.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})},verifyNumber(t){let e=/^\d*\.+$/g;return isNaN(t)&&(t=0),t=parseFloat(t)>=0?function(t){return/^-?\d*\.\d+$/.test(t)}(parseFloat(t))?parseFloat(t.split(".")[0]+"."+t.split(".")[1].substr(0,1)):e.test(t)?parseFloat(t)+".":t?parseFloat(t):0:0},setDragTrash(t,e,a,i,n,s){let o=null;if(o=this.temData.commentBtn[t][n],"scale"===e)r=o[e],/^-?\d*\.\d+$/.test(r)&&(o[e]=parseFloat(o[e]).toFixed(1));else{if(("x"===e||"width"===e)&&o[e]>1920)return o[e]=o[e].substr(0,o[e].length-1),this.$message.error("输入数值超出范围 应为0-1920"),!1;if(("y"===e||"height"===e)&&o[e]>1080)return o[e]=o[e].substr(0,o[e].length-1),this.$message.error("输入数值超出范围 应为0-1080"),!1;"x"!==e&&"y"!==e&&"width"!==e&&"height"!==e||(o[e]=this.verifyNumber(o[e])),"width"===e&&o.lock&&a&&(o.height=(parseFloat(a)/i).toFixed(0)),"height"===e&&o.lock&&a&&(o.width=(parseFloat(a)*i).toFixed(0))}var r},lockStatusDragOption(t,e){if(t.image.name){if(!t.image.width||!t.image.height)return void this.$message.error("绑定对象的宽高都不可为空");"true"===e.currentTarget.getAttribute("data-lock")?(e.currentTarget.setAttribute("data-lock","false"),t.image.ratio=0,t.image.lock=!1):(e.currentTarget.setAttribute("data-lock","true"),t.image.lock=!0,t.image.ratio=parseFloat(t.image.width)/parseFloat(t.image.height))}else this.$message({type:"warning",message:"舞台未绑定元素!"})},uploadAudio(t,e){let a=e.target.files[0].name.split(".")[e.target.files[0].name.split(".").length-1];-1!==["mp3","wav"].indexOf(a)?0!==e.target.files.length?this.$http.post("/uploadingAudio",{audio:e.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.temData.comentAudio[t].audio=a.resourceName,e.target.value=""}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})}},mounted(){}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"game-title",staticStyle:{background:"#313131","padding-left":"8px"}},[a("i",{ref:"option1Title",class:t.tabShowStatus.option1?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("option1")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("option1")}}},[t._v("\n            公共部分\n        ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus.option1,expression:"tabShowStatus.option1"}],staticClass:"game-inner"},[a("div",{staticClass:"game-title"},[a("i",{ref:"option2Title",class:t.tabShowStatus.option2?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("option2")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("option2")}}},[t._v("\n                键盘\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus.option2,expression:"tabShowStatus.option2"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate"},[a("div",{staticClass:"edit-radio-title"},[a("el-radio-group",{model:{value:t.temData.keyChoice,callback:function(e){t.$set(t.temData,"keyChoice",e)},expression:"temData.keyChoice"}},[a("el-radio",{attrs:{label:"1"}},[t._v("默认开启不可收回")]),t._v(" "),a("el-radio",{attrs:{label:"2"}},[t._v("手动开启可收回")])],1)],1)])]),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option3Title",class:t.tabShowStatus.option3?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("option3")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("option3")}}},[t._v("\n                按钮\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus.option3,expression:"tabShowStatus.option3"}],staticClass:"game-inner",staticStyle:{"padding-left":"0px","padding-right":"0px"}},[a("div",{staticClass:"option-animate"},[a("div",{staticClass:"option-animate-title"},[a("span",[t._v("上一题")]),t._v(" "),a("div",{staticClass:"edit-switch",staticStyle:{float:"right","margin-top":"-5px"}},[a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.temData.commentBtn.prevBtn.show,callback:function(e){t.$set(t.temData.commentBtn.prevBtn,"show",e)},expression:"temData.commentBtn.prevBtn.show"}})],1)])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.temData.commentBtn.prevBtn.show,expression:"temData.commentBtn.prevBtn.show"}],staticClass:"option-animate",staticStyle:{"border-bottom":"1px solid #222"}},[a("div",[a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.temData.commentBtn.prevBtn.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("prevBtn",e)}}})])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragTrash("prevBtn","width",e,t.temData.commentBtn.prevBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.prevBtn.image.width,callback:function(e){t.$set(t.temData.commentBtn.prevBtn.image,"width",e)},expression:"temData.commentBtn.prevBtn.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.temData.commentBtn.prevBtn.image.ratio}},[a("img",{attrs:{src:t.temData.commentBtn.prevBtn.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.temData.commentBtn.prevBtn,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragTrash("prevBtn","height",e,t.temData.commentBtn.prevBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.prevBtn.image.height,callback:function(e){t.$set(t.temData.commentBtn.prevBtn.image,"height",e)},expression:"temData.commentBtn.prevBtn.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragTrash("prevBtn","x",e,t.temData.commentBtn.prevBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.prevBtn.image.x,callback:function(e){t.$set(t.temData.commentBtn.prevBtn.image,"x",e)},expression:"temData.commentBtn.prevBtn.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragTrash("prevBtn","y",e,t.temData.commentBtn.prevBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.prevBtn.image.y,callback:function(e){t.$set(t.temData.commentBtn.prevBtn.image,"y",e)},expression:"temData.commentBtn.prevBtn.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],1)])]),t._v(" "),a("div",{staticClass:"option-animate"},[t._m(0),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.temData.commentBtn.nextBtn.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("nextBtn",e)}}})])])])]),t._v(" "),a("div",{staticClass:"option-animate"},[t._m(1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.temData.commentBtn.subBtn.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage("submit",e)}}})])])])]),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"pointItem"},[a("div",{staticClass:"lockStatus"},[a("el-input",{attrs:{placeholder:"请输入其宽度",size:"mini"},on:{input:function(e){return t.setDragTrash("nextBtn","width",e,t.temData.commentBtn.nextBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.nextBtn.image.width,callback:function(e){t.$set(t.temData.commentBtn.nextBtn.image,"width",e)},expression:"temData.commentBtn.nextBtn.image.width"}},[a("template",{slot:"prepend"},[t._v("W :")])],2),t._v(" "),a("span",{staticClass:"lock_block",attrs:{lockRadio:t.temData.commentBtn.nextBtn.image.ratio}},[a("img",{attrs:{src:t.temData.commentBtn.nextBtn.image.lock?t.lockImg:t.unLockImg,"data-lock":"false",alt:""},on:{click:function(e){return t.lockStatusDragOption(t.temData.commentBtn.nextBtn,e)}}})]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其高度",size:"mini"},on:{input:function(e){return t.setDragTrash("nextBtn","height",e,t.temData.commentBtn.nextBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.nextBtn.image.height,callback:function(e){t.$set(t.temData.commentBtn.nextBtn.image,"height",e)},expression:"temData.commentBtn.nextBtn.image.height"}},[a("template",{slot:"prepend"},[t._v("H :")])],2)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始x",size:"mini"},on:{input:function(e){return t.setDragTrash("nextBtn","x",e,t.temData.commentBtn.nextBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.nextBtn.image.x,callback:function(e){t.$set(t.temData.commentBtn.nextBtn.image,"x",e)},expression:"temData.commentBtn.nextBtn.image.x"}},[a("template",{slot:"prepend"},[t._v("X :")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入其起始y",size:"mini"},on:{input:function(e){return t.setDragTrash("nextBtn","y",e,t.temData.commentBtn.nextBtn.image.ratio,"image","")}},model:{value:t.temData.commentBtn.nextBtn.image.y,callback:function(e){t.$set(t.temData.commentBtn.nextBtn.image,"y",e)},expression:"temData.commentBtn.nextBtn.image.y"}},[a("template",{slot:"prepend"},[t._v("Y :")])],2),t._v(" "),a("div",{staticStyle:{clear:"both","margin-bottom":"5px",width:"100%"}})],1)]),t._v(" "),a("div",{staticClass:"game-title"},[a("i",{ref:"option4Title",class:t.tabShowStatus.option4?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("option4")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("option4")}}},[t._v("\n                选中音效\n            ")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus.option4,expression:"tabShowStatus.option4"}],staticClass:"game-inner"},[a("div",{staticClass:"option-animate",staticStyle:{border:"none"}},[a("div",{staticClass:"option-animate-title"},[a("span",[t._v("选中输入框")]),t._v(" "),a("div",{staticClass:"edit-switch",staticStyle:{float:"right","margin-top":"-5px"}},[a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{change:function(e){return t.showInput(e)}},model:{value:t.temData.comentAudio.pickBlank.show,callback:function(e){t.$set(t.temData.comentAudio.pickBlank,"show",e)},expression:"temData.comentAudio.pickBlank.show"}})],1)])]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"1px solid #222"}},[a("div",{staticClass:"upload",staticStyle:{"margin-top":"0px"}},[a("div",{staticClass:"animate-box"},[a("span",[t._v("音频文件：")]),a("span",{domProps:{textContent:t._s(t.temData.comentAudio.pickBlank.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio("pickBlank",e)}}})])])])]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"none"}},[a("div",{staticClass:"option-animate-title",staticStyle:{"border-bottom":"none"}},[a("span",[t._v("点击键盘")]),t._v(" "),a("div",{staticClass:"edit-switch",staticStyle:{float:"right","margin-top":"-5px"}},[a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},on:{change:function(e){return t.showKeys(e)}},model:{value:t.temData.comentAudio.keyBlank.show,callback:function(e){t.$set(t.temData.comentAudio.keyBlank,"show",e)},expression:"temData.comentAudio.keyBlank.show"}})],1)])]),t._v(" "),a("div",{staticClass:"option-animate",staticStyle:{"border-bottom":"1px solid #222"}},[a("div",{staticClass:"upload",staticStyle:{"margin-top":"0px"}},[a("div",{staticClass:"animate-box"},[a("span",[t._v("音频文件：")]),a("span",{domProps:{textContent:t._s(t.temData.comentAudio.keyBlank.audio)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadAudio("keyBlank",e)}}})])])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("下一题")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"option-animate-title"},[e("span",[this._v("提交")])])}]};var y=a("C7Lr")(x,w,!1,function(t){a("kepO")},"data-v-339da304",null).exports,k={name:"EditGame",data:()=>({gameData:null,showStatus:!1,publicSourceData:null,tabShowStatus:[],publicChildStatus:{button:!1,animate:!1,audio:!1},publicStatus:!1,resourceData:null,feedbackAnimateData:null,tabShowLists:{bgImage:!1,stemImg:!1,subTitle:!1,option:!1,option1:!1,option2:!1,option3:!1,option4:!1,option5:!1,option6:!1,option7:!1,option8:!1,option9:!1,option10:!1}}),props:["allData"],methods:{setLock(t){},getJSON(){this.getResourceData(()=>{this.showStatus=!0}),this.gameData=this.allData.sources,this.feedbackAnimateData=this.allData.feedbackAnimate,this.publicSourceData=this.allData.publicSourceData,this.tabShowStatus=[],this.gameData.forEach((t,e)=>{this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(JSON.stringify(this.tabShowLists))})})},getResourceData(t){this.$http.get("/getResourceJSON",{params:{}}).then(e=>{this.resourceData=e,t&&t()})},changeArr(t,e){if("add"===t){let t=["x","y","width","height"];let e=JSON.parse(JSON.stringify(this.gameData[0]));!function e(a){Object.values(a).forEach((i,n)=>{"[object Object]"===Object.prototype.toString.call(i)?"stem"===Object.keys(a)[n]?(i.show=!1,i.text="请输入文本",i.width=960,i.x=0,i.y=0,i.lineHeight=60,i.letterSpacing=30,i.fontFamily="Microsoft YaHei",i.fontSize=36,i.color="#000000",i.textAlign="justify",i.strong=!1,i.italic=!1,i.padding=40,i.componentName="stemText"):e(i):"[object Array]"===Object.prototype.toString.call(i)?(a[Object.keys(a)[n]]=a[Object.keys(a)[n]].splice(0,1),e(a[Object.keys(a)[n]])):"[object String]"===Object.prototype.toString.call(i)?"componentName"!=Object.keys(a)[n]&&(t.indexOf(Object.keys(a)[n])>-1?a[Object.keys(a)[n]]=0:"scale"===Object.keys(a)[n]?a[Object.keys(a)[n]]=1:"ratio"===Object.keys(a)[n]?a[Object.keys(a)[n]]=1:a[Object.keys(a)[n]]=""):"[object Number]"===Object.prototype.toString.call(i)&&(t.indexOf(Object.keys(a)[n])>-1?a[Object.keys(a)[n]]=0:"scale"===Object.keys(a)[n]?a[Object.keys(a)[n]]=1:"ratio"===Object.keys(a)[n]?a[Object.keys(a)[n]]=1:a[Object.keys(a)[n]]=0)})}(e),this.gameData.push(e),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(JSON.stringify(this.tabShowLists))}),Object(g.CopyPageAndRender)(this.gameData.length-1,e,this.allData)}else if("copy"===t){let t=JSON.parse(JSON.stringify(this.gameData[e]));this.gameData.push(JSON.parse(JSON.stringify(this.gameData[e]))),this.tabShowStatus.push({show:!1,lock:!1,child:JSON.parse(JSON.stringify(this.tabShowLists))}),Object(g.CopyPageAndRender)(this.gameData.length-1,t,this.allData)}else"del"===t&&this.gameData.length>1&&this.$confirm("此操作将删除选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$message({type:"success",message:"删除成功!"}),this.gameData.splice(e,1),this.tabShowStatus.splice(e,1),store.dispatch("setPageNumber",0),window.stage.getChildByName("GAME").removeChildren(),Object(g.RenderAllData)(!0,this.allData)}).catch(()=>{this.$message({type:"info",message:"已取消"})})},tabShow(t,e){let a=this.$refs[e+"Title"],i=this.tabShowStatus[t].show;if(Object.keys(this.tabShowStatus[t].child).forEach((e,a)=>{this.tabShowStatus[t].child[e]=!1}),i)this.tabShowStatus[t].show=!1,a.className="el-icon-arrow-right",store.dispatch("setPageNumber",-1);else{let e=window.stage.getChildByName("GAME");this.tabShowStatus.forEach((t,e)=>{this.tabShowStatus[e].show=!1}),e.children.forEach((t,e)=>{t.visible=!1}),this.tabShowStatus[t].show=!0,e.getChildByName("GAME"+t).visible=!0,a.className="el-icon-arrow-down",store.dispatch("setPageNumber",t)}console.log(store.state.pageNumber)},updateResourceData(){this.getResourceData()}},mounted(){this.getJSON()},components:{EditGamePublic:d,EditGamePrivate:u,EditGameBefore:f,EditGameAfter:y}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"game"},[a("EditGameBefore",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t._l(t.gameData,function(e,i){return a("div",{staticClass:"game-box",style:{marginTop:0===i?"8px":0}},[a("div",{staticClass:"game-title",staticStyle:{background:"#313131","padding-left":"8px","border-bottom":"1px solid #232323"},style:{background:t.tabShowStatus[i].show?"#409EFF":"#313131"},on:{click:function(e){return t.setLock(i)}}},[a("i",{ref:"oneTitle",refInFor:!0,class:t.tabShowStatus[i].show?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow(i,"one")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow(i,"one")}}},[t._v("\n                内容页"+t._s(i+1)+"\n            ")]),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-delete",on:{click:function(e){return t.changeArr("del",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-tickets",on:{click:function(e){return t.changeArr("copy",i)}}}),t._v(" "),a("i",{staticClass:"game-title-icon el-icon-plus",on:{click:function(e){return t.changeArr("add",i)}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tabShowStatus[i].show,expression:"tabShowStatus[index].show"}]},[a("EditGamePublic",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus},on:{updateResourceData:t.updateResourceData}}),t._v(" "),a("EditGamePrivate",{attrs:{gameData:t.gameData,item:e,index:i,resourceData:t.resourceData,allData:t.allData,tabShowStatus:t.tabShowStatus,tabShowLists:t.tabShowLists},on:{updateResourceData:t.updateResourceData}})],1)])}),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("EditGameAfter",{attrs:{gameData:t.gameData,resourceData:t.resourceData,allData:t.allData},on:{updateResourceData:t.updateResourceData}})],2):t._e()},staticRenderFns:[]};var S=a("C7Lr")(k,_,!1,function(t){a("nIQM")},null,null).exports;var D={name:"EditEnd",data:()=>({time:0,label:"1",endData:null,showStatus:!1,tabShowStatus:{endBg:!1,goldNum:!1},fontFamily:[{label:"微软雅黑",value:"Microsoft YaHei"},{label:"宋体",value:"SimSun"},{label:"黑体",value:"SimHei"},{label:"方正粗圆",value:"FZCuYuan-M03S"},{label:"方正粗圆简",value:"FZZhunYuan-M02S"}],resourceData:null}),props:["allData"],methods:{setGoldTextFontStyle(t){this.endData.goldText[t]=!this.endData.goldText[t],this.endData.goldText[t]?this.endData.goldText.fontWeight="bold":this.endData.goldText.fontWeight="normal","italic"==t&&(this.endData.goldText[t]?this.endData.goldText.fontStyle="italic":this.endData.goldText.fontStyle="")},setResource(t,e){this.endData[t][e].show||(this.endData[t][e].name="")},tabShow(t,e){this.$refs[e];this.tabShowStatus[t]?this.tabShowStatus[t]=!1:(Object.keys(this.tabShowStatus).forEach((t,e)=>{this.tabShowStatus[t]=!1}),this.tabShowStatus[t]=!0)},getJSON(){this.endData=this.allData.one.end,this.getResourceData(()=>{this.showStatus=!0})},getResourceData(t){this.$http.get("/getResourceJSON",{params:{}}).then(e=>{this.resourceData=e,t&&t()})},uploadAnimation(t){if(0===t.target.files.length||3!==t.target.files.length)return void this.$message({message:"上传文件个数不符合",type:"warning"});let e={};Object.values(t.target.files).forEach((t,a)=>{e["animation"+(a+1)]=t}),this.$http.post("/uploadingAnimation",e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{t.target.value="",this.endData.endBg.animate.name=e.resourceName})},uploadImage(t){let e=t.target.files[0].name.split(".")[t.target.files[0].name.split(".").length-1];-1!==["jpg","png"].indexOf(e)?0!==t.target.files.length?t.target.files[0].size/1024/1024>1?this.$message({message:"上传文件大小在1M以内",type:"warning"}):this.$http.post("/uploadingImage",{image:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log(e),t.target.value="",this.endData.endBg.image.name=e.resourceName,this.endData.endBg.image.width=e.width,this.endData.endBg.image.height=e.height,this.endData.endBg.image.x=0,this.endData.endBg.image.y=0,this.getResourceData()}):this.$message({message:"上传文件个数不符合",type:"warning"}):this.$message({message:"上传类型不符",type:"error"})}},mounted(){this.getJSON()}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showStatus?a("div",{staticClass:"end"},[a("div",{staticClass:"end-time"},[a("el-input",{staticStyle:{width:"100%","margin-top":"0"},attrs:{placeholder:"",size:"mini"},model:{value:t.endData.jumpResultTime,callback:function(e){t.$set(t.endData,"jumpResultTime",e)},expression:"endData.jumpResultTime"}},[a("template",{slot:"prepend"},[t._v("最后一题停留时间")]),t._v(" "),a("template",{slot:"append"},[t._v("ms")])],2)],1),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"endBgTitle",class:t.tabShowStatus.endBg?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("endBg","endBgTitle")}}},[t._v("\n            背景图\n        ")])]),t._v(" "),t.tabShowStatus.endBg?a("div",{staticClass:"end-inner"},[a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","image")}},model:{value:t.endData.endBg.image.show,callback:function(e){t.$set(t.endData.endBg.image,"show",e)},expression:"endData.endBg.image.show"}},[t._v("图片")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("div",{staticClass:"img-box"},[a("img",{attrs:{src:t.resourceData[t.endData.endBg.image.name],alt:"",width:"131",height:"96"}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改图片")]),t._v(" "),a("input",{attrs:{type:"file"},on:{change:function(e){return t.uploadImage(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.x,callback:function(e){t.$set(t.endData.endBg.image,"x",e)},expression:"endData.endBg.image.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.y,callback:function(e){t.$set(t.endData.endBg.image,"y",e)},expression:"endData.endBg.image.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.width,callback:function(e){t.$set(t.endData.endBg.image,"width",e)},expression:"endData.endBg.image.width"}},[a("template",{slot:"prepend"},[t._v("W：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.image.height,callback:function(e){t.$set(t.endData.endBg.image,"height",e)},expression:"endData.endBg.image.height"}},[a("template",{slot:"prepend"},[t._v("H：")])],2),t._v(" "),a("div",{staticClass:"edit-checkbox-title"},[a("el-checkbox",{attrs:{size:"small"},on:{change:function(e){return t.setResource("endBg","animate")}},model:{value:t.endData.endBg.animate.show,callback:function(e){t.$set(t.endData.endBg.animate,"show",e)},expression:"endData.endBg.animate.show"}},[t._v("动画")])],1),t._v(" "),a("div",{staticClass:"upload"},[a("span",{staticClass:"file-title"},[t._v("\n                动画文件：\n            ")]),t._v(" "),a("div",{staticClass:"animate-box"},[a("span",{domProps:{textContent:t._s(t.endData.endBg.animate.name)}})]),t._v(" "),a("div",{staticClass:"upload-btn"},[a("div",{staticClass:"upload-btn-file"},[a("span",[t._v("更改文件")]),t._v(" "),a("input",{attrs:{type:"file",multiple:"multiple"},on:{change:function(e){return t.uploadAnimation(e)}}})])])]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.x,callback:function(e){t.$set(t.endData.endBg.animate,"x",e)},expression:"endData.endBg.animate.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.y,callback:function(e){t.$set(t.endData.endBg.animate,"y",e)},expression:"endData.endBg.animate.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.endBg.animate.scale,callback:function(e){t.$set(t.endData.endBg.animate,"scale",e)},expression:"endData.endBg.animate.scale"}},[a("template",{slot:"prepend"},[t._v("Scale：")])],2),t._v(" "),a("div",{staticClass:"edit-switch"},[a("span",[t._v("loop")]),t._v(" "),a("el-switch",{attrs:{"active-color":"#77DC04","inactive-color":"#ff4949"},model:{value:t.endData.endBg.animate.loop,callback:function(e){t.$set(t.endData.endBg.animate,"loop",e)},expression:"endData.endBg.animate.loop"}})],1)],1):t._e(),t._v(" "),a("div",{staticClass:"end-title"},[a("i",{ref:"goldNumTitle",class:t.tabShowStatus.goldNum?"el-icon-arrow-down":"el-icon-arrow-right",on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}}),t._v(" "),a("span",{on:{click:function(e){return t.tabShow("goldNum","goldNumTitle")}}},[t._v("\n            金币文字\n        ")])]),t._v(" "),t.tabShowStatus.goldNum?a("div",{staticClass:"end-inner"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.x,callback:function(e){t.$set(t.endData.goldText,"x",e)},expression:"endData.goldText.x"}},[a("template",{slot:"prepend"},[t._v("X：")])],2),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.y,callback:function(e){t.$set(t.endData.goldText,"y",e)},expression:"endData.goldText.y"}},[a("template",{slot:"prepend"},[t._v("Y：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("字体：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",size:"mini"},model:{value:t.endData.goldText.fontFamily,callback:function(e){t.$set(t.endData.goldText,"fontFamily",e)},expression:"endData.goldText.fontFamily"}},t._l(t.fontFamily,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",size:"mini"},model:{value:t.endData.goldText.fontSize,callback:function(e){t.$set(t.endData.goldText,"fontSize",e)},expression:"endData.goldText.fontSize"}},[a("template",{slot:"prepend"},[t._v("字号：")])],2),t._v(" "),a("div",{staticClass:"edit-select"},[a("span",[t._v("颜色：")]),t._v(" "),a("el-color-picker",{model:{value:t.endData.goldText.color,callback:function(e){t.$set(t.endData.goldText,"color",e)},expression:"endData.goldText.color"}})],1),t._v(" "),a("div",{staticClass:"font-style"},[a("span",{class:t.endData.goldText.strong?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("strong")}}},[t._v("B")]),t._v(" "),a("span",{class:t.endData.goldText.italic?"font-style-color":"",on:{click:function(e){return t.setGoldTextFontStyle("italic")}}},[t._v("I")])])],1):t._e()]):t._e()},staticRenderFns:[]};var C=a("C7Lr")(D,B,!1,function(t){a("p4W+")},"data-v-246a5cd2",null).exports,I=(a("E/U7"),a("qqHy")),A=a.n(I),T=a("7Q5p"),N=a.n(T),$=a("3vtO"),F=(a("004W"),a("qWh7")),O=a.n(F);let E,z;var q={name:"start",data:()=>({isShow:!1,number:0,answerStatus:[],answerData:[],option:["A","B","C","D","E","F","G","H"]}),methods:{createApp:()=>new s.Application({width:1920,height:1080,autoSize:!0,transparent:!0})},components:{},created(){document.getElementsByClassName("page-loading")[0].style.display="block"},props:["allData"],destroyed(){PIXI.sound.stopAll(),app.destroy()},mounted(){PIXI.sound.stopAll(),document.getElementsByClassName("page-loading")[0].style.display="block",window.app=this.createApp(),app.view.style.width="19.2rem",app.view.style.height="10.8rem",app.view.id="appCanvas",window.stage=app.stage;this.$refs.canvas.appendChild(app.view),stage.interactive=!0,Object($.load)().then(t=>{console.log("%c资源加载完啦✌️","color:#FF323B;font-weight:bold;"),this.$nextTick(()=>{window.question=t.question.data,E=t.question.data,z=t.question.data;let e=new O.a(E.one.start,t);stage.addChild(e),store.state.testNum=t.question.data.sources.length,document.getElementsByClassName("page-loading")[0].style.display="none",Object(g.RenderAllData)(!0,this.allData),function(){let t=document.querySelectorAll(".container");for(let e=0;e<t.length;e++)t[e].style.width=window.clientWidth-340+"px",t[e].style.height=(window.clientWidth-340)*(10.8/19.2)+"px"}()})})}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"canvas",staticClass:"canvas"}),this._v(" "),e("img",{staticClass:"logo",attrs:{src:"static/images/logo.png",id:"logo"}})])},staticRenderFns:[]};var M=a("C7Lr")(q,P,!1,function(t){a("K/KG")},"data-v-b3847b56",null).exports;let R=!0;a("IcnI");var j={name:"Edit",data:()=>({allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:N.a.title,version:N.a.version,label:"2",submitStatus:!1}),components:{start:l,game:S,end:C,index:M},methods:{setContainer(t){store.dispatch("setPageNumber",-1),"ftp"===t?"start"===this.activeName?(this.allData.one.start.show&&(window.stage.getChildByName("START").visible=!0),window.stage.getChildByName("GAME").visible=!1,window.stage.getChildByName("gameBgSound")&&window.stage.setChildIndex(window.stage.getChildByName("gameBgSound"),window.stage.children.length-1)):"game"===this.activeName&&(window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(t=>{t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0):"start1"===this.activeName1?(this.allData.one.start.show&&(window.stage.getChildByName("START").visible=!0),window.stage.getChildByName("GAME").visible=!1):"game1"===this.activeName1&&(window.stage.getChildByName("GAME").visible=!0,window.stage.getChildByName("GAME").children.forEach(t=>{t.visible=!1}),window.stage.getChildByName("GAME").getChildByName("GAME0").visible=!0)},reload(){location.reload(!0)},reloadIframe(){location.reload(!0)},changeType(){"1"===this.label?this.allData.interface=!0:this.allData.interface=!1},getJSON(){this.$http.get("/getJSON",{params:{}}).then(t=>{this.allData=t,console.log(this.allData.interface),this.allData.interface?this.label="1":this.label="2";let e=A()(".container"),a=window.clientWidth-340+"px",i=(window.clientWidth-340)*(10.8/19.2)+"px";e.css({width:a,height:i}),this.showStatus=!0})},writeJSON(t="submit"){if(R){R=!1;let e=JSON.parse(JSON.stringify(this.allData.one.end));!function t(e){Object.values(e).forEach((a,i)=>{"object"==typeof a?t(a):"boolean"==typeof a?e[Object.keys(e)[i]]=!1:"string"==typeof a?e[Object.keys(e)[i]]="":"number"==typeof a&&(e[Object.keys(e)[i]]=0)})}(e),"1"==this.allData.dragShow?this.allData.sources.forEach((t,e)=>{t.content.option2.back.image.name="",t.content.option2.back.image.componentName="",t.content.option2.back.image.x=0,t.content.option2.back.image.y=0,t.content.option2.back.image.width=0,t.content.option2.back.image.height=0,t.content.option2.blank.forEach((e,a)=>{t.content.option2.blank[a].image.name="",t.content.option2.blank[a].image.componentName="",t.content.option2.blank[a].image.x=0,t.content.option2.blank[a].image.y=0,t.content.option2.blank[a].image.width=0,t.content.option2.blank[a].image.height=0,t.content.option2.blank[a].image.name_another.name=""}),t.content.option2.brash.image.name="",t.content.option2.brash.image.width=0,t.content.option2.brash.image.height=0,t.content.option2.reset.image.name="",t.content.option2.reset.image.componentName="",t.content.option2.reset.image.x=0,t.content.option2.reset.image.y=0,t.content.option2.reset.image.width=0,t.content.option2.reset.image.height=0}):this.allData.sources.forEach((t,e)=>{t.content.option1.trash.image.name="",t.content.option1.trash.image.name_another.name="",t.content.option1.trash.image.width=0,t.content.option1.trash.image.height=0,t.content.option1.trash.image.x=0,t.content.option1.trash.image.y=0,t.content.option1.blank_drag.forEach((e,a)=>{t.content.option1.blank_drag[a].image.name="",t.content.option1.blank_drag[a].image.name_another.name="",t.content.option1.blank_drag[a].image.width=0,t.content.option1.blank_drag[a].image.height=0,t.content.option1.blank_drag[a].image.x=0,t.content.option1.blank_drag[a].image.y=0}),t.content.option1.option.forEach((e,a)=>{t.content.option1.option[a].image.name="",t.content.option1.option[a].image.width=0,t.content.option1.option[a].image.height=0,t.content.option1.option[a].image.x=0,t.content.option1.option[a].image.y=0})}),console.log("保存.....",this.allData),"1"===this.label&&(this.allData.one.end=e,console.log(this.allData.one.end)),this.$http.post("/writeJSON",{dataList:JSON.stringify(this.allData)}).then(e=>{if(this.$message({type:e.type,message:e.message}),this.submitStatus=!0,A()(".submitBtn").removeClass("submitActive"),"preview"===t){let t,e="start"===this.activeName||"start1"===this.activeName1||-1==store.state.pageNumber?"true":"false";"true"===e&&store.dispatch("setPageNumber",0),t="http://localhost:8888/#/preview?id="+store.state.pageNumber+"&startStatus="+e,window.open(t)}setTimeout(()=>{this.submitStatus=!1,R=!0,A()(".submitBtn").addClass("submitActive")},1e3)})}}},mounted(){let t;function e(){let t=document.querySelectorAll(".container");for(let e=0;e<t.length;e++)t[e].style.width=window.clientWidth-340+"px",t[e].style.height=(window.clientWidth-340)*(10.8/19.2)+"px"}this.getJSON(),window.onresize=e,this.$nextTick(()=>{e()}),t=window.location.href.split("#")[0]}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t.allData?a("div",{staticClass:"iframe"},[a("index",{ref:"container",attrs:{allData:t.allData}})],1):t._e(),t._v(" "),t.showStatus?a("div",{staticClass:"edit"},[a("header",[a("h1",{domProps:{textContent:t._s(t.modelName)}}),t._v(" "),a("p",{domProps:{textContent:t._s("版本号：v"+t.version)}})]),t._v(" "),a("div",{staticClass:"edit-tab"},[a("el-radio",{attrs:{label:"1"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("课件平台組课")]),t._v(" "),a("el-radio",{attrs:{label:"2"},on:{change:function(e){return t.changeType()}},model:{value:t.label,callback:function(e){t.label=e},expression:"label"}},[t._v("ftp組课")])],1),t._v(" "),"1"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("new")}},model:{value:t.activeName1,callback:function(e){t.activeName1=e},expression:"activeName1"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start1"}},["start1"===t.activeName1?a("start",{ref:"start1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game1"}},["game1"===t.activeName1?a("game",{ref:"game1",attrs:{allData:t.allData},on:{reload:t.reloadIframe}},[t._v(">\n\n                ")]):t._e()],1)],1):t._e(),t._v(" "),"2"===t.label?a("el-tabs",{attrs:{type:"border-card",value:"内容页",stretch:!0},on:{"tab-click":function(e){return t.setContainer("ftp")}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"开始页",name:"start"}},["start"===t.activeName?a("start",{ref:"start",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"内容页",name:"game"}},["game"===t.activeName?a("game",{ref:"game",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{label:"结果页",name:"end"}},["end"===t.activeName?a("end",{ref:"end",attrs:{allData:t.allData},on:{reload:t.reloadIframe}}):t._e()],1)],1):t._e(),t._v(" "),a("div",{staticClass:"submit"},[a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary"},on:{click:function(e){return t.writeJSON("preview")}}},[t._v("预览")]),t._v(" "),a("el-button",{staticClass:"submitBtn submitActive",attrs:{type:"primary",disabled:t.submitStatus},on:{click:function(e){return t.writeJSON()}}},[t._v("保存")])],1)],1):t._e()])},staticRenderFns:[]};var G=a("C7Lr")(j,X,!1,function(t){a("R7CL")},null,null);e.a=G.exports},WHpE:function(t,e,a){"use strict";a("E/U7");var i=a("qqHy"),n=a.n(i),s=a("7Q5p"),o=a.n(s),r={name:"Edit",data:()=>({allData:null,showStatus:!1,publicImg:"",maskStatus:!1,startData:null,activeName:"game",activeName1:"game1",modelName:o.a.title,version:o.a.version,label:"2",submitStatus:!1}),methods:{reload(){location.reload(!0)}},mounted(){let t;n()("#submitButton").on("click",function(){if(window.store.state.pShow){console.log("新接口强制提交");let t={type:"getAnswer"};n()(".iframe iframe")[0].contentWindow.postMessage(t,"*")}else{console.log("旧接口强制提交");let t={type:"resubmitAnswer"};n()(".iframe iframe")[0].contentWindow.postMessage(t,"*")}}),window.addEventListener("message",function(t){if("onload"==t.data.type)console.log("onload接口");else if("submitAnswer"==t.data.type){let e=t.data.data.testAnswer,a=t.data.data.testNum,i=0,s=0,o=0;for(let t=0;t<a;t++){if(void 0==e[t])continue;let a=e[t],n=a.answer.length;"string"==typeof a.answer&&(n=1);let r=a.rightnum;a.isright&&s++,0==r&&0==a.type&&(o++,r=0),r>0&&0==a.type&&(r=n),a.is_right=r==n?1:0,a.rate=r/n,i+=a.rate}let r=i/a,l={goldnum:o=(o+=Math.ceil(10*r))>10?10:o,result:t.data.data.testAnswer};console.log("newData"),console.log(l);let m={type:"answerResult",data:l};n()(".iframe iframe")[0].contentWindow.postMessage(m,"*")}else if("submitData"==t.data.type){let t={type:"resubmitAnswer"};n()(".iframe iframe")[0].contentWindow.postMessage(t,"*")}else if("close"==t.data.type)n()(".iframe iframe").attr("src",""),n()(".submitData").hide();else if("answer"==t.data.type){let e={type:"answerTextResult",data:t.data.data};n()(".iframe iframe")[0].contentWindow.postMessage(e,"*")}}),t="http://localhost:8888/#/?id="+this.$route.query.id+"&startStatus="+this.$route.query.startStatus,document.getElementById("iframeWindow").src=t}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("img",{attrs:{src:"static/images/reload.png",alt:"",id:"reload"},on:{click:function(e){return t.reload()}}}),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"iframe"},[e("button",{attrs:{id:"submitButton"}},[this._v("强制提交")]),this._v(" "),e("iframe",{attrs:{src:"/",id:"iframeWindow",frameborder:"0"}})])}]};var m=a("C7Lr")(r,l,!1,function(t){a("ujNM")},"data-v-56dc9cd6",null);e.a=m.exports},aGwf:function(t,e){},epTE:function(t,e){},kepO:function(t,e){},nIQM:function(t,e){},"p4W+":function(t,e){},pTbB:function(t,e){},rl9v:function(t,e){},sEHa:function(t,e){},ujNM:function(t,e){},zel7:function(t,e,a){"use strict";var i={data:()=>({resultDate:store.state.resultArr}),mounted(){console.log("平台校验结果页出现")}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-table",{staticClass:"resultTable",staticStyle:{width:"19.2rem",positon:"absolute",left:"50%","margin-left":"-9.6rem",top:"-5rem",padding:"0 1rem"},attrs:{data:this.resultDate}},[e("el-table-column",{staticStyle:{width:"1rem"},attrs:{prop:"id",label:"题号"}}),this._v(" "),e("el-table-column",{staticStyle:{"text-align":"center"},attrs:{prop:"userAnswerContent",label:"你的答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"rightAnswerContent",label:"正确答案"}}),this._v(" "),e("el-table-column",{attrs:{prop:"isRight",label:"校验结果"}})],1)},staticRenderFns:[]};var s=a("C7Lr")(i,n,!1,function(t){a("aGwf")},"data-v-0b169922",null);e.a=s.exports},zwgh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.load=function(){return window.res?new Promise((t,e)=>{console.info(2),t(window.res)}):(console.info(1),new Promise((t,e)=>{n.add("question","static/content.json"),n.add("resources","static/resource.json"),n.load(()=>{let e=PIXI.loader.resources.resources.data;e.forEach(t=>{if(n.add(t.key,t.path),t.key.indexOf("image")>-1){var e=new Image;e.src=t.path,e.onerror=function(t){console.log(t),errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.target.src,type:"resourceLoadERROR"}))}}else if(t.key.indexOf("audio")>-1){var a=new Audio;a.src=t.path,a.onerror=function(e){errorArr.unshift(dataAssembling({msg:"Resource not loaded error",url:t.path,type:"resourceLoadERROR"}))}}}),n.load((e,a)=>{window.res=a,t(a)}),n.onError.add(t=>{console.log(t)}),n.onProgress.add(t=>{document.getElementsByClassName("runner")[0].style.width=6.8*t.progress/100+"rem"}),n.onComplete.add(t=>{})})}))},e.getAnimation=function(t){return new PIXI.spine.Spine(res[t].spineData)},e.getSound=function(t){return res[t].data},e.createSprite=function(t){return console.log(new i.Sprite(t)),new i.Sprite(t)},e.getOptionTexture=function(t,e){return res[t].textures[e]},e.getTexture=function(t){return res[t].texture};var i=a("9bLE");a.n(i);a("P6Fy");let n=PIXI.loader}},["NHnr"]);